"use strict";(self.webpackChunknotebook=self.webpackChunknotebook||[]).push([[73452],{29087:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>i});var o=t(96363);const r={},s=o.createContext(r);function a(n){const e=o.useContext(s);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),o.createElement(s.Provider,{value:e},n.children)}},41254:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>i,default:()=>l,frontMatter:()=>a,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"indexedDB/\u68c0\u7d22","title":"\u68c0\u7d22","description":"\u901a\u8fc7\u5bf9\u8c61\u4ed3\u5e93\u6216\u7d22\u5f15\u7684 get() \u65b9\u6cd5\uff0c\u53ea\u80fd\u83b7\u53d6\u4e00\u6761\u4fe1\u606f\u3002\u5728\u9700\u8981\u7684\u65f6\u5019\u901a\u8fc7\u67d0\u4e2a\u68c0\u7d22\u6761\u4ef6\u6765\u68c0\u7d22\u4e00\u6279\u6570\u636e\u65f6\uff0c\u9700\u8981\u4f7f\u7528 indexedDB API \u7684\u6e38\u6807\u3002","source":"@site/html/indexedDB/\u68c0\u7d22.mdx","sourceDirName":"indexedDB","slug":"/indexedDB/\u68c0\u7d22","permalink":"/html/indexedDB/\u68c0\u7d22","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u68c0\u7d22"},"sidebar":"TrSjaHf3NnyGYO0U","previous":{"title":"\u83b7\u53d6","permalink":"/html/indexedDB/\u83b7\u53d6"},"next":{"title":"cache","permalink":"/html/cache/"}}');var r=t(47259),s=t(29087);const a={title:"\u68c0\u7d22"},i="\u68c0\u7d22\u952e\u503c",d={},c=[];function u(n){const e={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"\u68c0\u7d22\u952e\u503c",children:"\u68c0\u7d22\u952e\u503c"})}),"\n",(0,r.jsx)(e.p,{children:"\u901a\u8fc7\u5bf9\u8c61\u4ed3\u5e93\u6216\u7d22\u5f15\u7684 get() \u65b9\u6cd5\uff0c\u53ea\u80fd\u83b7\u53d6\u4e00\u6761\u4fe1\u606f\u3002\u5728\u9700\u8981\u7684\u65f6\u5019\u901a\u8fc7\u67d0\u4e2a\u68c0\u7d22\u6761\u4ef6\u6765\u68c0\u7d22\u4e00\u6279\u6570\u636e\u65f6\uff0c\u9700\u8981\u4f7f\u7528 indexedDB API \u7684\u6e38\u6807\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-html",children:"<body>\n  <input\n    type=\"button\"\n    id=\"btnConnect\"\n    value=\"\u8fde\u63a5\u6570\u636e\"\n    onclick=\"connectDatabase()\"\n  />\n  <input type=\"button\" value=\"\u4fdd\u5b58\u6570\u636e\" id=\"btnSave\" onclick=\"SaveData()\" />\n  <input type=\"button\" value=\"\u68c0\u7d22\u6570\u636e\" id=\"btnSearch\" onclick=\"SearchData()\" />\n</body>\n<script>\n  function mi(n) {\n    return document.querySelector(n);\n  }\n  window.indexedDB =\n    window.indexedDB ||\n    window.webkitIndexedDB ||\n    window.mozIndexedDB ||\n    window.msIndexedDB;\n  window.IDBTransaction =\n    window.IDBTransaction ||\n    window.webkitIDBTransaction ||\n    window.msIDBTransaction;\n  window.IDBKeyRange =\n    window.IDBKeyRange || window.webkitIDBKeyRange || window.msIDBKeyRange;\n  window.IDBCursor =\n    window.IDBCursor || window.webkitIDBCursor || window.msIDBCursor;\n  var dbName = 'indexedDBTest'; // \u6570\u636e\u5e93\u540d\n  var dbVersion = 20220430; // \u7248\u672c\u53f7\n  var idb;\n  function connectDatabase() {\n    var dbConnect = indexedDB.open(dbName, dbVersion);\n    dbConnect.onsuccess = function (e) {\n      idb = e.target.result;\n      console.log('\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f');\n      mi('#btnSave').disabled = false;\n    };\n    dbConnect.onerror = function (e) {\n      console.log('\u8fde\u63a5 indexedDB \u6570\u636e\u5e93\u5931\u8d25');\n    };\n  }\n  function SaveData() {\n    var t = idb.transaction(['Users'], 'readwrite');\n    t.oncomplete = function () {\n      console.log('\u4fdd\u5b58\u6210\u529f');\n      mi('#btnSearch').disabled = false;\n    };\n    t.onabort = function () {\n      console.log('\u4fdd\u5b58\u5931\u8d25');\n    };\n    var s = t.objectStore('users');\n    var v = { userID: 1, userName: '\u738b\u4e94', address: '\u5317\u4eac' };\n    s.put(v);\n    var v = { userID: 2, userName: '\u5218\u516d', address: '\u56db\u5ddd' };\n    s.put(v);\n    var v = { userID: 3, userName: '\u767d\u4e03', address: '\u5929\u6d25' };\n    s.put(v);\n    var v = {\n      userID: 4,\n      userName: '\u8d75\u4e5d',\n      address: '\u5e7f\u897f',\n    };\n    s.put(v);\n  }\n  function SearchData() {\n    var t = idb.transaction(['users'], 'readonly');\n    var s = t.objectStore('users');\n    var r = IDBKeyRange.bound(1, 4);\n    var d = 'next';\n    var re = store.openCursor(r, d);\n    re.onsuccess = function (e) {\n      var c = this.result;\n      if (c) console.log('\u68c0\u7d22\u5230\u4e00\u6761\u6570\u636e\uff0c\u7528\u6237\u540d\u4e3a\uff1a' + c.value.userName);\n      else console.log('\u68c0\u7d22\u7ed3\u675f');\n    };\n    re.onerror = function (e) {\n      console.log('\u68c0\u7d22\u6570\u636e\u5931\u8d25');\n    };\n  }\n  window.onload = function () {\n    mi('#btnSave').disabled = true;\n    mi('#btnSearch').disabled = true;\n  };\n<\/script>\n"})})]})}function l(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(u,{...n})}):u(n)}}}]);