"use strict";(self.webpackChunknotebook=self.webpackChunknotebook||[]).push([[46217],{3037:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"\u4f18\u5316/\u9875\u9762\u91cd\u6784","title":"\u9875\u9762\u91cd\u6784","description":"JavaScript \u7684\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u4f5c\u7528\u5c31\u662f\u5bf9 DOM \u8fdb\u884c\u64cd\u4f5c\uff0c\u4f46\u662f\u5bf9 DOM \u7684\u64cd\u4f5c\u662f\u975e\u5e38\u5360\u7528\u8d44\u6e90\u7684\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u5bfc\u81f4\u6d4f\u89c8\u5668\u6267\u884c DOM Reflow \u548c Repaint","source":"@site/js/\u4f18\u5316/\u9875\u9762\u91cd\u6784.mdx","sourceDirName":"\u4f18\u5316","slug":"/\u4f18\u5316/\u9875\u9762\u91cd\u6784","permalink":"/js/\u4f18\u5316/\u9875\u9762\u91cd\u6784","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u9875\u9762\u91cd\u6784"},"sidebar":"az2Kt0VR0KcelL2W","previous":{"title":"\u63a7\u5236\u5185\u5b58","permalink":"/js/\u4f18\u5316/\u63a7\u5236\u5185\u5b58"},"next":{"title":"es 6","permalink":"/js/es 6/"}}');var i=l(47259),r=l(29087);const s={title:"\u9875\u9762\u91cd\u6784"},o="\u55ef",c={},d=[{value:"\u5173\u4e8e DOM Reflow \u548c Repaint",id:"\u5173\u4e8e-dom-reflow-\u548c-repaint",level:2},{value:"\u4f18\u5316 DOM Reflow",id:"\u4f18\u5316-dom-reflow",level:2},{value:"\u4f18\u5316 Repaint",id:"\u4f18\u5316-repaint",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u55ef",children:"\u55ef"})}),"\n",(0,i.jsx)(n.p,{children:"JavaScript \u7684\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u4f5c\u7528\u5c31\u662f\u5bf9 DOM \u8fdb\u884c\u64cd\u4f5c\uff0c\u4f46\u662f\u5bf9 DOM \u7684\u64cd\u4f5c\u662f\u975e\u5e38\u5360\u7528\u8d44\u6e90\u7684\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u5bfc\u81f4\u6d4f\u89c8\u5668\u6267\u884c DOM Reflow \u548c Repaint\n\u64cd\u4f5c\u3002\u800c\u6267\u884c\u4e86\u8fc7\u591a\u7684\u9875\u9762\u91cd\u6784\u64cd\u4f5c\uff0c\u5c31\u4f1a\u4f7f\u7f51\u9875\u53d8\u5f97\u8d8a\u6765\u8d8a\u6162\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u5173\u4e8e-dom-reflow-\u548c-repaint",children:"\u5173\u4e8e DOM Reflow \u548c Repaint"}),"\n",(0,i.jsx)(n.p,{children:"\u4e00\u4e2a HTML \u7f51\u9875\u88ab\u52a0\u8f7d\u8fdb\u6d4f\u89c8\u5668\u4e2d\u540e\uff0c\u88ab\u89e3\u6790\u4e3a DOM \uff0c\u7136\u540e\u518d\u5e94\u7528\u6837\u5f0f\u6765\u5448\u73b0\uff0c\u56e0\u6b64\u8be5\u9875\u9762\u7684\u6700\u7ec8\u5448\u73b0\u901a\u8fc7\u4e24\u4e2a\u6b65\u9aa4\u6765\u5b8c\u6210\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"DOM \uff1a\u63cf\u8ff0\u8be5\u9875\u9762\u7684\u7ed3\u6784"}),"\n",(0,i.jsx)(n.li,{children:"\u6e32\u67d3\uff1a\u63cf\u8ff0 DOM \u5728\u9875\u9762\u4e0a\u5982\u4f55\u5448\u73b0"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5f53 DOM \u5143\u7d20\u7684\u5c5e\u6027\uff08\u5982 color \uff09\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u6d4f\u89c8\u5668\u4f1a\u901a\u77e5\u6e32\u67d3\u5f15\u64ce\u91cd\u65b0\u63cf\u7ed8\u76f8\u5e94\u7684\u5143\u7d20\uff0c\u6b64\u8fc7\u7a0b\u79f0\u4e3a Repaint \u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u53d8\u5316\u6d89\u53ca\u5143\u7d20\u5e03\u5c40\uff0c\u6d4f\u89c8\u5668\u5219\u629b\u5f03\u539f\u6709\u5c5e\u6027\uff0c\u91cd\u65b0\u8ba1\u7b97\u5e76\u628a\u7ed3\u679c\u4f20\u9012\u7ed9\u6e32\u67d3\u5f15\u64ce\u4ee5\u91cd\u65b0\u63cf\u7ed8\u9875\u9762\u5143\u7d20\uff0c\u6b64\u8fc7\u7a0b\u79f0\u4e3a Reflow \u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u4e24\u4e2a\u6b65\u9aa4\u662f\u6700\u8017\u8d39\u8d44\u6e90\u7684\uff0c\u6bcf\u6b21\u5bf9\u5143\u7d20\u7684\u64cd\u4f5c\u90fd\u4f1a\u53d1\u751f Repaint \u6216 Reflow \uff0c\u56e0\u6b64\u7f16\u5199 DOM \u4ea4\u4e92\u65f6\u5982\u679c\u4e0d\u6ce8\u610f\u5c31\u4f1a\u5bfc\u81f4\u9875\u9762\u6027\u80fd\u4f4e\u4e0b\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u9664\u4e86\u5728\u9996\u6b21\u52a0\u8f7d\u9875\u9762\u65f6\u5fc5\u7136\u8981\u7ecf\u5386\u4ee5\u4e0a\u8fd9\u4e24\u4e2a\u6b65\u9aa4\u4e4b\u5916\uff0c\u8fd8\u6709\u4ee5\u4e0b\u884c\u4e3a\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u884c\u4e3a\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"DOM \u5143\u7d20\u7684\u6dfb\u52a0\u3001\u4fee\u6539\u3001\u5220\u9664\uff0c\u6b64\u65f6 Reflow \u548c Repaint \u90fd\u4f1a\u53d1\u751f"}),"\n",(0,i.jsx)(n.li,{children:"\u6539\u53d8\u7a97\u4f53\u5927\u5c0f\u3001\u6eda\u52a8\u9875\u9762\u3001\u6dfb\u52a0\u6216\u79fb\u9664\u6837\u5f0f\u3001\u5185\u5bb9\u6539\u53d8\u3001 CSS \u4f2a\u7c7b\u88ab\u89e6\u53d1\u3001\u66f4\u6539\u5143\u7d20\u7684 className \u3001\u83b7\u53d6\u4e00\u4e2a\u5fc5\u987b\u7ecf\u8fc7\u8ba1\u7b97\u7684\u5c3a\u5bf8\u503c\uff08\u5982\u8bfb\u53d6\u5143\u7d20\u7684 offsetLeft \u3001 offsetTop \u3001 offsetHeight \u3001 offsetWidth \u3001 scrollTop/Left/Width/Height \u3001 clientTop/Left/Width/ Height \u3001 getComputedStyle() \u3001 currentStyle \u5c5e\u6027\u6216\u8005\u5176\u5b83\u9700\u8981\u7ecf\u8fc7\u8ba1\u7b97\u7684 CSS \u503c\uff09\uff0c\u90fd\u4f1a\u5bfc\u81f4 Repaint \u53d1\u751f \u5728\u517c\u5bb9 DOM \u7684\u6d4f\u89c8\u5668\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 getComputedStyle() \u65b9\u6cd5\u83b7\u53d6\u6837\u5f0f\u7684\u8ba1\u7b97\u503c\u3002\u5728 IE \u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 currentStyle \u5c5e\u6027\u83b7\u53d6\u8ba1\u7b97\u503c\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u6b64\u65f6\u53ea\u6709 Repaint \uff0c\u56e0\u4e3a\u4e0d\u9700\u8981\u8c03\u6574\u5e03\u5c40\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u4f18\u5316-dom-reflow",children:"\u4f18\u5316 DOM Reflow"}),"\n",(0,i.jsx)(n.p,{children:"\u53ef\u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\u4f18\u5316 DOM Reflow \uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u80fd\u76f4\u63a5\u4f7f\u7528 innerHTML \u7684\u5c31\u4e0d\u8981\u7528 DOM \uff0c DOM \u8981\u6bd4\u76f4\u63a5\u751f\u6210\u4ee3\u7801\u6162\u5f88\u591a"}),"\n",(0,i.jsx)(n.li,{children:"\u5c06\u5143\u7d20\u4ece document \u4e2d\u5220\u9664\uff0c\u5b8c\u6210\u4fee\u6539\u540e\u518d\u628a\u5143\u7d20\u653e\u56de\u539f\u6765\u7684\u4f4d\u7f6e"}),"\n",(0,i.jsx)(n.li,{children:"\u5c06\u5143\u7d20\u7684 display \u8bbe\u7f6e\u4e3a none \uff0c\u5b8c\u6210\u4fee\u6539\u540e\u518d\u628a display \u4fee\u6539\u4e3a\u539f\u6765\u7684\u503c"}),"\n",(0,i.jsx)(n.li,{children:"\u5728\u4f7f\u7528 DOM \u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u6587\u6863\u7247\u6bb5\uff08 document.createDocumentFragment() \uff09\u7f13\u5b58\u8fc7\u7a0b\u4e2d\u7684 DOM \u5143\u7d20"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u4f8b\u5982\uff0c\u5728\u6e38\u620f\u7684\u4e00\u4e2a\u573a\u666f\u4e2d\uff0c\u5982\u679c\u8981\u4e3a\u4e00\u4e2a Player \u52a0\u8840\uff0c\u5e76\u5047\u5b9a\u662f 5 \u683c\u8840\uff0c\u5c31\u4f1a\u662f 5 \u4e2a\u80fd\u91cf\u503c\u6765\u5448\u73b0\uff0c\u56e0\u6b64\u53ef\u80fd\u4f1a\u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u6cd5\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"for (var i = 0; i < 5; i++) {\n  var powerCell = new PowerCell();\n  document.body.appendChild(powerCell);\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u95ee\u9898\u51fa\u73b0\u4e86\uff0c\u6211\u4eec\u7684\u76ee\u7684\u662f\u5e0c\u671b\u80fd\u540c\u65f6\u51fa\u73b0 5 \u683c\u8840\uff0c\u8fd9\u91cc\uff0c\u5982\u679c\u5faa\u73af\u5c06 5 \u4e2a PowerCell \u5bf9\u8c61\u6dfb\u52a0\u5230 body \uff0c\u4f1a\u5bfc\u81f4\u4e00\u4e2a\u7ed3\u679c\uff1a\u6d4f\u89c8\u5668\u5bf9 DOM \u6811\u91cd\u6784\u4e86 5 \u6b21\uff08 DOM \u6811\u91cd\u6784\u672f\u8bed\u88ab\u79f0\u4e3a Reflow \uff09\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u91cc\u5c31\u53ef\u4ee5\u4f7f\u7528\u6587\u6863\u7247\u6bb5\uff0c\u5148\u628a 5 \u683c\u8840\u5c01\u88c5\u4e3a\u4e00\u4e2a DocumentFragment \uff0c\u7136\u540e\uff0c\u518d\u4e00\u6b21\u6027\u6dfb\u52a0\u5230 body \u4e2d\uff0c\u8fd9\u6837\u5c31\u53ea\u4f1a Reflow \u4e00\u6b21\uff0c\u4ece\u800c\u5927\u5927\u63d0\u9ad8\u6027\u80fd\u3002\u4f8b\u5982\u4e0b\u9762\u7684\u4ee3\u7801\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"var df = document.createDocumentFragment();\nfor (var i = 0; i < 5; i++) {\n  var powerCell = new PowerCell();\n  df.appendChild(powerCell);\n}\ndocument.body.appendChild(df);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u4f18\u5316-repaint",children:"\u4f18\u5316 Repaint"}),"\n",(0,i.jsx)(n.p,{children:"Repaint \u5176\u5b9e\u5c31\u662f CSS \u5bfc\u81f4\u7684\uff0c\u56e0\u6b64\uff0c\u8981\u6ce8\u610f\u4ee5\u4e0b\u4e8b\u9879\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5c3d\u53ef\u80fd\u5c11\u5730\u4fee\u6539\u5143\u7d20 style \u4e0a\u7684\u5c5e\u6027\uff0c\u5c3d\u91cf\u901a\u8fc7\u4fee\u6539 className \u6765\u4fee\u6539\u6837\u5f0f"}),"\n",(0,i.jsx)(n.li,{children:"\u901a\u8fc7 cssText \u5c5e\u6027\u4e00\u6b21\u6027\u5c06\u6837\u5f0f\u503c\u8bbe\u7f6e\u5230\u5bf9\u8c61"}),"\n",(0,i.jsx)(n.li,{children:"\u907f\u514d\u8bbe\u7f6e\u8fc7\u591a\u7684\u884c\u5185\u6837\u5f0f"}),"\n",(0,i.jsx)(n.li,{children:"\u907f\u514d\u4f7f\u7528\u8868\u683c\u6765\u5e03\u5c40"}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},29087:(e,n,l)=>{l.d(n,{R:()=>s,x:()=>o});var t=l(96363);const i={},r=t.createContext(i);function s(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);