"use strict";(globalThis.webpackChunknotebook=globalThis.webpackChunknotebook||[]).push([[15016],{54013(n,e,d){d.r(e),d.d(e,{assets:()=>a,contentTitle:()=>r,default:()=>l,frontMatter:()=>s,metadata:()=>i,toc:()=>w});const i=JSON.parse('{"id":"indexedDB/\u8fde\u63a5","title":"\u8fde\u63a5","description":"\u4f7f\u7528 indexedDB \u6570\u636e\u5e93\u7684\u65f6\u5019\uff0c\u9996\u5148\u9700\u8981\u9884\u5b9a\u4e49 indexedDB \u6570\u636e\u5e93 \u3001 \u8be5\u6570\u636e\u5e93\u6240\u7528\u7684\u4e8b\u52a1 \u3001 IDBKey \u5bf9\u8c61\u548c\u6e38\u6807\u5bf9\u8c61\u3002\u5b9a\u4e49\u5982\u4e0b\uff1a","source":"@site/html/indexedDB/\u8fde\u63a5.mdx","sourceDirName":"indexedDB","slug":"/indexedDB/\u8fde\u63a5","permalink":"/html/indexedDB/\u8fde\u63a5","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u8fde\u63a5"},"sidebar":"RRhFQ58Ul1J5KCbn","previous":{"title":"\u57fa\u7840","permalink":"/html/indexedDB/\u57fa\u7840"},"next":{"title":"\u66f4\u65b0","permalink":"/html/indexedDB/\u66f4\u65b0"}}');var o=d(56730),t=d(25502);const s={title:"\u8fde\u63a5"},r="\u8fde\u63a5\u6570\u636e\u5e93",a={},w=[{value:"\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5",id:"\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,t.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"\u8fde\u63a5\u6570\u636e\u5e93",children:"\u8fde\u63a5\u6570\u636e\u5e93"})}),"\n",(0,o.jsx)(e.p,{children:"\u4f7f\u7528 indexedDB \u6570\u636e\u5e93\u7684\u65f6\u5019\uff0c\u9996\u5148\u9700\u8981\u9884\u5b9a\u4e49 indexedDB \u6570\u636e\u5e93 \u3001 \u8be5\u6570\u636e\u5e93\u6240\u7528\u7684\u4e8b\u52a1 \u3001 IDBKey \u5bf9\u8c61\u548c\u6e38\u6807\u5bf9\u8c61\u3002\u5b9a\u4e49\u5982\u4e0b\uff1a"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",metastring:"showLineNumbers",children:"window.indexedDB =\n  window.indexedDB ||\n  window.webkitIndexedDB ||\n  window.mozIndexedDB ||\n  window.msIndexedDB;\nwindow.IDBTransaction =\n  window.IDBTransaction ||\n  window.webkitIDBTransaction ||\n  window.msIDBTransaction;\nwindow.IDBKeyRange =\n  window.IDBKeyRange || window.webkitIDBKeyRange || window.msIDBKeyRange;\nwindow.IDBCursor =\n  window.IDBCursor || window.webkitIDBCursor || window.msIDBCursor;\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u4f7f\u7528\u5e93\u4e4b\u524d\uff0c\u5148\u8fde\u63a5\u5e93\uff1a"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",metastring:"showLineNumbers",children:"window.indexedDB =\n  window.indexedDB ||\n  window.webkitIndexedDB ||\n  window.mozIndexedDB ||\n  window.msIndexedDB;\nwindow.IDBTransaction =\n  window.IDBTransaction ||\n  window.webkitIDBTransaction ||\n  window.msIDBTransaction;\nwindow.IDBKeyRange =\n  window.IDBKeyRange || window.webkitIDBKeyRange || window.msIDBKeyRange;\nwindow.IDBCursor =\n  window.IDBCursor || window.webkitIDBCursor || window.msIDBCursor;\n/**\n *\n */\nfunction connectDatabase() {\n  const dbName = 'indexedDBTest'; // \u6570\u636e\u5e93\u540d\n  const dbVersion = 20220430; // \u7248\u672c\u53f7\n  let idb;\n  const dbConnect = indexedDB.open(dbName, dbVersion);\n  dbConnect.onsuccess = function (e) {\n    idb = e.target.result;\n    console.log('\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f');\n  };\n  dbConnect.onerror = function (e) {\n    console.log('\u8fde\u63a5 indexedDB \u6570\u636e\u5e93\u5931\u8d25');\n  };\n}\n"})}),"\n",(0,o.jsx)(e.p,{children:"indexedDB.open() \u4f1a\u8fd4\u56de\u4e00\u4e2a IDBOpenRequest \u5bf9\u8c61\uff0c\u4ee3\u8868\u4e00\u4e2a\u8bf7\u6c42\u8fde\u63a5\u6570\u636e\u5e93\u7684\u8bf7\u6c42\u5bf9\u8c61\u3002"}),"\n",(0,o.jsx)(e.p,{children:"\u8fde\u63a5\u6210\u529f\u65f6\uff0c\u4f1a\u53d6\u5f97\u4e8b\u4ef6\u5bf9\u8c61\u7684 event.target.result \u5c5e\u6027\u503c\uff0c\u8be5\u5c5e\u6027\u503c\u4e3a\u4e00\u4e2a IDBDatabase \u5bf9\u8c61\uff0c\u4ee3\u8868\u8fde\u63a5\u6210\u529f\u7684\u6570\u636e\u5e93\u5bf9\u8c61\u3002"}),"\n",(0,o.jsx)(e.h2,{id:"\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5",children:"\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5"}),"\n",(0,o.jsx)(e.p,{children:"\u5728 API \u4e2d\uff0c\u4f7f\u7528 close() \u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\u3002"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",metastring:"showLineNumbers",children:"idb.close();\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u6570\u636e\u5e93\u5173\u95ed\u540e\uff0c\u4e0d\u80fd\u518d\u505a\u5176\u5b83\u5bf9\u6570\u636e\u5e93\u7684\u64cd\u4f5c\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u6d4f\u89c8\u5668\u629b\u51fa\u5f02\u5e38\u3002"})]})}function l(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(c,{...n})}):c(n)}},25502(n,e,d){d.d(e,{R:()=>s,x:()=>r});var i=d(10162);const o={},t=i.createContext(o);function s(n){const e=i.useContext(t);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);