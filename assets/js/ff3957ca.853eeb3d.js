"use strict";(self.webpackChunknotebook=self.webpackChunknotebook||[]).push([[32839],{29087:(t,n,e)=>{e.d(n,{R:()=>r,x:()=>s});var a=e(96363);const o={},i=a.createContext(o);function r(t){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof t?t(n):{...n,...t}},[n,t])}function s(t){let n;return n=t.disableParentContext?"function"==typeof t.components?t.components(o):t.components||o:r(t.components),a.createElement(i.Provider,{value:n},t.children)}},67091:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"\u5b9a\u4f4d/\u4f8b","title":"\u4f8b","description":"\u8981\u5728\u9875\u9762\u4e2d\u4f7f\u7528 Google \u5730\u56fe\uff0c\u9700\u8981\u7528\u5230 Google Map API \u3002","source":"@site/html/\u5b9a\u4f4d/\u4f8b.mdx","sourceDirName":"\u5b9a\u4f4d","slug":"/\u5b9a\u4f4d/\u4f8b","permalink":"/html/\u5b9a\u4f4d/\u4f8b","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u4f8b"},"sidebar":"TrSjaHf3NnyGYO0U","previous":{"title":"\u65b9\u6cd5","permalink":"/html/\u5b9a\u4f4d/\u65b9\u6cd5"},"next":{"title":"storage","permalink":"/html/storage/"}}');var o=e(47259),i=e(29087);const r={title:"\u4f8b"},s="\u4f7f\u7528 Google \u5730\u56fe",d={},l=[{value:"\u8ddf\u8e2a\u884c\u8d70\u901f\u5ea6",id:"\u8ddf\u8e2a\u884c\u8d70\u901f\u5ea6",level:2}];function c(t){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...t.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"\u4f7f\u7528-google-\u5730\u56fe",children:"\u4f7f\u7528 Google \u5730\u56fe"})}),"\n",(0,o.jsx)(n.p,{children:"\u8981\u5728\u9875\u9762\u4e2d\u4f7f\u7528 Google \u5730\u56fe\uff0c\u9700\u8981\u7528\u5230 Google Map API \u3002"}),"\n",(0,o.jsx)(n.p,{children:"\u5728\u9875\u9762\u4e2d\u5bfc\u5165 Google Map API \u7684\u811a\u672c\u6587\u4ef6\uff0c\u5bfc\u5165\u65b9\u6cd5\u5982\u4e0b\u6240\u793a\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'\x3c!-- [http://maps.google.com/maps/api/js?sensor=false](http://maps.google.com/maps/api/js?sensor=false) --\x3e\n\n<head>\n  <script>\n    function init() {\n      //\u53d6\u5f97\u5f53\u524d\u5730\u7406\u4f4d\u7f6e\n      navigator.geolocation.getCurrentPosition(function (position) {\n        var coords = position.coords;\n        // \u8bbe\u5b9a\u5730\u56fe\u53c2\u6570\uff0c\u5c06\u7528\u6237\u7684\u5f53\u524d\u4f4d\u7f6e\u7684\u7eac\u5ea6\u3001\u7ecf\u5ea6\u8bbe\u5b9a\u4e3a\u5730\u56fe\u7684\u4e2d\u5fc3\u70b9\n        var latlng = new google.maps.LatLng(coords.latitude, coords.longitude);\n        var myOptions = {\n          zoom: 14,\n          center: latlng,\n          mapTypeId: google.maps.MapTypeId.ROADMAP,\n        };\n        // \u521b\u5efa\u5730\u56fe\u5e76\u5728 "map" \u7684 div \u4e2d\u663e\u793a\n        var map1;\n        map1 = new google.maps.Map(document.getElementById(\'map\'), myOptions);\n        // \u5728\u5730\u56fe\u4e0a\u521b\u5efa\u6807\u8bb0\n        var marker = new google.maps.Marker({ position: latlng, map: map1 });\n        // \u8bbe\u5b9a\u6807\u6ce8\u7a97\u53e3\uff0c\u5e76\u6307\u5b9a\u8be5\u7a97\u53e3\u4e2d\u7684\u6ce8\u91ca\u6587\u5b57\n        var infowindow = new google.maps.InfoWindow({ content: \' \u5f53\u524d\u4f4d\u7f6e !\' });\n        // \u6253\u5f00\u6807\u6ce8\u7a97\u53e3 info\n        window.open(map1, marker);\n      });\n    }\n  <\/script>\n</head>\n<body onload="init()">\n  <div id="map" style="width:400px; height:400px"></div>\n</body>\n'})}),"\n",(0,o.jsx)(n.h2,{id:"\u8ddf\u8e2a\u884c\u8d70\u901f\u5ea6",children:"\u8ddf\u8e2a\u884c\u8d70\u901f\u5ea6"}),"\n",(0,o.jsx)(n.p,{children:"\u4f7f\u7528 watchPosition() \u51fd\u6570\uff0c\u6bcf\u5f53\u6709\u65b0\u7684\u4f4d\u7f6e\u8fd4\u56de\uff0c\u5c31\u5c06\u5176\u4e0e\u6700\u540e\u4fdd\u5b58\u7684\u4f4d\u7f6e\u8fdb\u884c\u6bd4\u8f83\u4ee5\u8ba1\u7b97\u8ddd\u79bb\u3002\u6240\u6709\u7f13\u5b58\u4f4d\u7f6e\u6570\u636e\u7684\u751f\u547d\u5468\u671f\u90fd\u4e0d\u80fd\u5927\u4e8e 205 \u3002"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"\u521b\u5efa\u793a\u4f8b\u7a0b\u5e8f\u7684 HTML\n\u663e\u793a\u4ee3\u7801\u3002\u8fd9\u91cc\u91cd\u70b9\u4ecb\u7ecd\u5904\u7406\u6570\u636e\u7684\u811a\u672c\uff0c\u5e76\u628a\u6240\u6709\u6700\u65b0\u7684\u6570\u636e\u4ee5\u7b80\u5355\u7684\u8868\u683c\u5f62\u5f0f\u5c55\u793a\uff0c\u5206\u884c\u663e\u793a\u7eac\u5ea6\u3001\u7ecf\u5ea6\u3001\u51c6\u786e\u5ea6\u548c\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\u3002\u6b64\u5916\uff0c\u663e\u793a\u8d70\u8fc7\u8ddd\u79bb\u7684\u6982\u8981\u60c5\u51b5\uff0c\u8fd8\u4f1a\u663e\u793a\u4e00\u4e9b\u6587\u672c\u7c7b\u7edf\u8ba1\u4fe1\u606f\uff0c\u4ee5\u4fbf\u7528\u6237\u80fd\u591f\u770b\u5230\u8d70\u8fc7\u8ddd\u79bb\u7684\u6982\u51b5\u3002"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"\u5904\u7406 Geolocation \u6570\u636e\u3002\u5728 Geolocation \u6570\u636e\u5904\u7406\u90e8\u5206\uff0c\u7b2c\u4e00\u6bb5 JavaScript \u4ee3\u7801\u4f1a\u68c0\u6d4b\u6d4f\u89c8\u5668\u662f\u5426\u652f\u6301 HTML5 Geolocation\n\uff0c\u7136\u540e\u5c06\u68c0\u6d4b\u7ed3\u679c\u663e\u793a\u5728\u9875\u9762\u4e0a\u3002\u6700\u540e\uff0c\u4ee3\u7801\u4f1a\u8bf7\u6c42\u76d1\u6d4b\u7528\u6237\u4f4d\u7f6e\u3002"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"\u5bf9\u4e8e\u8ddd\u79bb\u8ddf\u8e2a\u5668\u800c\u8a00\uff0c\u8fd9\u4e9b\u51fa\u9519\u5904\u7406\u5df2\u7ecf\u8db3\u591f\u4e86\uff0c\u5b83\u5c06\u68c0\u67e5\u6536\u5230\u7684\u6240\u6709\u9519\u8bef\u7f16\u53f7\uff0c\u5e76\u66f4\u65b0\u9875\u9762\u4e0a\u7684\u72b6\u6001\u4fe1"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"\u5927\u90e8\u5206\u5de5\u4f5c\u90fd\u5c06\u5728 updateLocation() \u51fd\u6570\u4e2d\u5b9e\u73b0\uff0c\u6b64\u51fd\u6570\u4e2d\u5c06\u4f7f\u7528\u6700\u65b0\u6570\u636e\u6765\u66f4\u65b0\u9875\u9762\u5e76\u8ba1\u7b97\u8def\u7a0b"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"\u8ba1\u7b97\u79fb\u52a8\u7684\u8ddd\u79bb\u3002\u5047\u8bbe\u524d\u9762\u5df2\u7ecf\u6536\u5230\u4e86\u4e00\u4e2a\u51c6\u786e\u7684\u4f4d\u7f6e\uff0c\u5c06\u66f4\u65b0\u79fb\u52a8\u7684\u603b\u8ddd\u79bb\u5e76\u5c06\u5176\u663e\u793a\u7ed9\u7528\u6237\uff0c\u540c\u65f6\u8fd8\u5c06\u50a8\u5b58\u5f53\u524d\u503c\u4ee5\u5907\u540e\u9762\u505a\u6bd4\u8f83\u3002\u4e3a\u4e86\u4f7f\u754c\u9762\u4e0d\u592a\u4e71\uff0c\u5728\u8ba1\u7b97\u6570\u503c\u65f6\u53ef\u91c7\u7528\u56db\u820d\u4e94\u5165\u6216\u622a\u65ad\u7684\u65b9\u5f0f"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n\n<head>\n  <meta charset="utf-8">\n  <title></title>\n</head>\n\n<body onload="loadDemo()">\n  <h2> \u5f53\u524d\u4f4d\u7f6e\n    :</h2>\n  <table border="1">\n    <tr>\n      <th width="40" scope="col"> \u7eac\u5ea6 </th>\n      <td width="114" id="latitude">?</td>\n    </tr>\n    <tr>\n      <td>\u7ecf\u5ea6 </td>\n      <td id="longitude">? |\n    <tr>\n      <td> \u51c6\u786e\u6027\n      </td>\n      <td id="accuracy">?</td>\n      | \u6700\u540e\u65f6\u95f4 </td>\n      <td id="timestamp">? |\n  </table>\n  <h4 id="currDist"> \u5f53\u524d\u884c\u9a76\u8ddd\u79bb : 0.0 km</h4>\n  <h4 id="totalDist"> \u603b\u8ddd\u79bb : 0.0 km</h4>\n  <script>\n\n    var totalDistance = 0.0; var lastLat; var\n      lastLong;\n    Number.prototype.toRadians = function () {\n      return this * Math.PI / 180;\n    }\n    function distance(latitude1, longitude1, latitude2,\n      longitude2) {\n      var R = 6371; var deltaLatitude = (latitude2 - latitude1).toRadians();\n      var deltaLongitude = (longitude2 - longitude1).toRadians(); latitude1 = latitude1.toRadians(), latitude2 = latitude2.toRadians();\n      var a = Math.sin(deltaLatitude / 2) * Math.sin(deltaLatitude / 2) +\n        Math.cos(latitude1) * Math.cos(latitude2) * Math.sin(deltaLongitude / 2) *\n        Math.sin(deltaLongitude / 2); var c = 2 * Math.atan2(Math.sqrt(a),\n          Math.sqrt(1 - a)); var d = R * c; return\n      d;\n    } function updateStatus(message) { document.getElementById("status").innerHTML = message; } function loadDemo() {\n      if (navigator.geolocation) {\n        updateStatus("HTML5 Geolocation is supported in your browser."); navigator.geolocation.watchPosition(updateLocation,\n\n          handleLocationError, { maximumAge: 20000 });\n      }\n    } function updateLocation(position) {\n\n      var latitude = position.coords.latitude; var longitude =\n        position.coords.longitude;; var accuracy = position.coords.accuracy; var timestamp = position.timestamp;\n      document.getElementById("latitude").innerHTML = latitude; document.getElementById("longitude").innerHTML = longitude; document.getElementById("accuracy").innerHTML = accuracy;\n      document.getElementById("timestamp").innerHTML = timestamp; if\n        (accuracy >= 500) {\n        updateStatus("Need more accurate values to calculate distance.");\n        return;\n      } if ((lastLat != null) && (lastLong !=\n        null)) {\n        var currentDistance = distance(latitude, longitude, lastLat, lastLong);\n\n        document.getElementById("currDist").innerHTML = "Current distance  traveled: " + currentDistance.toFixed(4) + " km"\n        totalDistance += currentDistance;\n\n        document.getElementById("totalDist").innerHTML = "Total distance traveled: " + currentDistance.toFixed(4) + " km"\n      }\n      lastLat = latitude; lastLong = longitude; updateStatus("Location successfully updated.");\n    }\n    function handleLocationError(error) {\n      switch (error.code) {\n        case 0: updateStatus("There was an error while retrieving your location: " + error.message);\n          break; case 1: updateStatus("The user prevented this page from retrieving a location."); break;\n        case 2: updateStatus("The browser was unable to determine your location: " + error.message); break;\n        case 3: updateStatus("The browser timed out before retrieving the location."); break;\n      }\n    }\n  <\/script>\n</body>\n\n</html>\n'})})]})}function u(t={}){const{wrapper:n}={...(0,i.R)(),...t.components};return n?(0,o.jsx)(n,{...t,children:(0,o.jsx)(c,{...t})}):c(t)}}}]);