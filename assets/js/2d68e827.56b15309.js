"use strict";(self.webpackChunknotebook=self.webpackChunknotebook||[]).push([[17569],{29087:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>s});var r=t(96363);const o={},a=r.createContext(o);function i(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(a.Provider,{value:n},e.children)}},37354:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>l,frontMatter:()=>i,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"XHR 2/ArrayBuffer","title":"ArrayBuffer","description":"\u5f53 XMLHttpRequest \u5bf9\u8c61\u7684 responseType \u5c5e\u6027\u8bbe\u7f6e\u4e3a arrayBuffer \u65f6\uff0c\u670d\u52a1\u5668\u54cd\u5e94\u6570\u636e\u5c06\u662f\u4e00\u4e2a ArrayBuffer \u5bf9\u8c61\u3002","source":"@site/js/XHR 2/ArrayBuffer.mdx","sourceDirName":"XHR 2","slug":"/XHR 2/ArrayBuffer","permalink":"/js/XHR 2/ArrayBuffer","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"ArrayBuffer"},"sidebar":"az2Kt0VR0KcelL2W","previous":{"title":"\u8de8\u57df","permalink":"/js/XHR 2/\u8de8\u57df"},"next":{"title":"Blob","permalink":"/js/XHR 2/Blob"}}');var o=t(47259),a=t(29087);const i={title:"ArrayBuffer"},s="\u63a5\u53d7\u6570\u7ec4",d={},u=[];function c(e){const n={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"\u63a5\u53d7\u6570\u7ec4",children:"\u63a5\u53d7\u6570\u7ec4"})}),"\n",(0,o.jsx)(n.p,{children:"\u5f53 XMLHttpRequest \u5bf9\u8c61\u7684 responseType \u5c5e\u6027\u8bbe\u7f6e\u4e3a arrayBuffer \u65f6\uff0c\u670d\u52a1\u5668\u54cd\u5e94\u6570\u636e\u5c06\u662f\u4e00\u4e2a ArrayBuffer \u5bf9\u8c61\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <title></title>\n\n    window.indexedDB = window.indexedDB || window.webkitIndexedDB ||\n    window.mozIndexedDB || window.msIndexedDB; window.IDBTransaction =\n    window.IDBTransaction || window.webkitIDBTransaction ||\n    window.msIDBTransaction; window.IDBKeyRange = window.IDBKeyRange ||\n    window.webkitIDBKeyRange || window.msIDBKeyRange; window.IDBCursor =\n    window.IDBCursor || window.webkitIDBCursor || window.msIDBCursor; window.URL\n    = window.URL || window.webkitURL; var dbName = 'imgDB'; // \u6570\u636e\u5e93\u540d var\n    dbVersion = 20190418; \u7248\u672c\u53f7 // var idb; function init() { var dbConnect =\n    indexedDB.open(dbName, dbVersion); // \u8fde\u63a5\u6570\u636e\u5e93 dbConnect.onsuccess =\n    function (e) { // \u8fde\u63a5\u6210\u529f idb = e.target.result; // \u83b7\u53d6\u6570\u636e\u5e93 };\n    dbConnect.onerror = function () { alert(' \u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25 '); };\n    dbConnect.onupgradeneeded = function (e) { idb = e.target.result; var tx =\n    e.target.transaction; tx.onabort = function (e) { alert(' \u5bf9\u8c61\u4ed3\u5e93\u521b\u5efa\u5931\u8d25\n    '); }; var name = 'img'; var optionalParameters = { keyPath: 'id',\n    autoIncrement: true, }; var store = idb.createObjectStore(name,\n    optionalParameters); alert(' \u5bf9\u8c61\u4ed3\u5e93\u521b\u5efa\u6210\u529f '); }; } function\n    downloadPic() { var xhr = new XMLHttpRequest(); xhr.open('GET',\n    'images/1.png', true); xhr.responseType = 'arrayBuffer'; xhr.onload =\n    function (e) { if (this.status == 200) { var bb = new Blob([this.response]);\n    var reader = new FileReader(); reader.readAsDataURL(bb); reader.onload =\n    function (f) { var result = document.getElementById('result'); // \u5728 IndexDB\n    \u6570\u636e\u5e93\u4e2d\u4fdd\u5b58\u4e8c\u8fdb\u5236\u6570\u636e var tx = idb.transaction(['img'], 'readwrite');\n    tx.oncomplete = function () { alert('\u4fdd\u5b58\u6570\u636e\u6210\u529f '); }; tx.onabort =\n    function () { alert(' \u4fdd\u5b58\u6570\u636e\u5931\u8d25 '); }; var store = tx.objectStore('img');\n    var value = { img: this.result }; store.put(value); }; } }; xhr.send(); }\n    function showPic() { var tx = idb.transaction(['img'], 'readonly'); var\n    store = tx.objectStore('img'); var req = store.get(1); req.onsuccess =\n    function () { if (this.result == undefined) { alert(' \u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u6570\u636e ');\n    } else { var img = document.createElement('img'); img.src = this.result.img;\n    document.body.appendChild(img); } }; req.onerror = function () { alert('\n    \u83b7\u53d6\u6570\u636e\u5931\u8d25 '); }; }\n  </head>\n\n  <body onload=\"init()\">\n    <input type=\"button\" value=\" \u4e0b\u8f7d\u56fe\u7247 \" onclick=\"downloadPic()\" />\n\n    <input type=\"button\" value=\" \u663e\u793a\u56fe\u7247 \" onclick=\"showPic()\" /><output\n      id=\"result\"\n    ></output>\n  </body>\n</html>\n"})})]})}function l(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);