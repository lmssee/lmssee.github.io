"use strict";(globalThis.webpackChunknotebook=globalThis.webpackChunknotebook||[]).push([[22063],{46693(n,t,e){e.r(t),e.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"ajax/\u4f8b","title":"\u4f8b","description":"Ajax \u7684\u8bf7\u6c42\u548c\u54cd\u5e94\u6bd4\u8f83\u7b80\u5355\uff0c\u4f46\u662f\u672c\u7740\\"\u82e5\u5e38\u7528\uff0c\u5219\u5c01\u88c5\\"\u7684\u539f\u5219\uff0c\u5c01\u88c5\u5982\u4e0b\u3002","source":"@site/js/ajax/\u4f8b.mdx","sourceDirName":"ajax","slug":"/ajax/\u4f8b","permalink":"/ajax/\u4f8b","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u4f8b"},"sidebar":"WabgeZrdzehcrQF7","previous":{"title":"\u8de8\u57df","permalink":"/ajax/\u8de8\u57df"},"next":{"title":"XHR 2","permalink":"/XHR 2/"}}');var a=e(56730),s=e(25502);const i={title:"\u4f8b"},o="\u5c06 Ajax \u8bf7\u6c42\u548c\u54cd\u5e94\u5c01\u88c5",c={},l=[{value:"\u52a8\u6001\u663e\u793a\u63d0\u793a\u4fe1\u606f",id:"\u52a8\u6001\u663e\u793a\u63d0\u793a\u4fe1\u606f",level:2}];function u(n){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"\u5c06-ajax-\u8bf7\u6c42\u548c\u54cd\u5e94\u5c01\u88c5",children:"\u5c06 Ajax \u8bf7\u6c42\u548c\u54cd\u5e94\u5c01\u88c5"})}),"\n",(0,a.jsx)(t.p,{children:'Ajax \u7684\u8bf7\u6c42\u548c\u54cd\u5e94\u6bd4\u8f83\u7b80\u5355\uff0c\u4f46\u662f\u672c\u7740"\u82e5\u5e38\u7528\uff0c\u5219\u5c01\u88c5"\u7684\u539f\u5219\uff0c\u5c01\u88c5\u5982\u4e0b\u3002'}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",metastring:"showLineNumbers",children:"/**\n *\n */\nfunction createXMLHTTPObject() {\n  const XMLHttpFactories = [\n    function () {\n      return new XMLHttpRequest();\n    },\n    function () {\n      return new ActiveXObject('Msxml2.XMLHTTP');\n    },\n    function () {\n      return new ActiveXObject('Msxml3.XMLHTTP');\n    },\n    function () {\n      return new ActiveXObject('Microsoft.XMLHTTP');\n    },\n  ];\n  let xmlhttp = false;\n  for (let i = 0; i < XMLHttpFactories.length; i++) {\n    try {\n      xmlhttp = XMLHttpFactories[i]();\n    } catch (e) {\n      continue;\n    }\n    break;\n  }\n  return xmlhttp;\n} // \u5c01\u88c5\u5f02\u6b65\u8bf7\u6c42\u51fd\u6570\n/**\n *\n */\nfunction request(url, callback, data) {\n  const xmlHttp = createXMLHTTPObject();\n  if (!xmlHttp) return;\n  const method = data ? 'POST' : 'GET';\n  xmlHttp.open(method, url, true);\n  xmlHttp.setRequestHeader('User-Agent', 'XMLHTTP/1.0');\n  if (data)\n    xmlHttp.setRequestHeader(\n      'Content-type',\n\n      'application/x-www-form-urlencoded',\n    );\n\n  xmlHttp.onreadystatechange = function () {\n    if (xmlHttp.readyState != 4) return;\n    if (xmlHttp.status != 200 && xmlHttp.status != 304) {\n      alert('HTTP \u8bf7\u6c42\u9519\u8bef ' + xmlHttp.status);\n      return;\n    }\n    callback(xmlHttp);\n  };\n  if (xmlHttp.readyState == 4) return;\n  xmlHttp.send(data);\n}\n"})}),"\n",(0,a.jsx)(t.h2,{id:"\u52a8\u6001\u663e\u793a\u63d0\u793a\u4fe1\u606f",children:"\u52a8\u6001\u663e\u793a\u63d0\u793a\u4fe1\u606f"}),"\n",(0,a.jsx)(t.p,{children:"\u4e3a\u4e86\u66f4\u52a0\u76f4\u89c2\u7684\u4e0e\u5ba2\u6237\u6c9f\u901a\uff0c\u907f\u514d\u4ea4\u4e92\u8fc7\u7a0b\u9875\u9762\u8fc7\u4e8e\u67af\u71e5\uff0c\u53ef\u4ee5\u7ed9 onreadystatechange\n\u4e2d\u7ed1\u5b9a\u56de\u8c03\u51fd\u6570\uff0c\u4e0b\u9762\u7b80\u5355\u4f8b\u5b50\uff1a"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",metastring:"showLineNumbers",children:"/**\n *\n */\nfunction Dan() {\n  const info = document.getElementById('info');\n  if (xhr.readyState == 1) {\n    info.innerHTML = \"<img src='images/loading.gif' />\u8fde\u63a5\u4e2d......\";\n  } else if (xhr.readyState == 2 || xhr.readyState == 3) {\n    info.innerHTML = \"<img src='images/loading.gif' />\u8bfb\u6570\u636e......\";\n  } else if (xhr.readyState == 4) {\n    if (xhr.status == 200) {\n      info.innerHTML = '' + xhr.responseText + '</span>';\n    } else alert(xhr.status);\n  }\n}\n"})})]})}function d(n={}){const{wrapper:t}={...(0,s.R)(),...n.components};return t?(0,a.jsx)(t,{...n,children:(0,a.jsx)(u,{...n})}):u(n)}},25502(n,t,e){e.d(t,{R:()=>i,x:()=>o});var r=e(10162);const a={},s=r.createContext(a);function i(n){const t=r.useContext(s);return r.useMemo(function(){return"function"==typeof n?n(t):{...t,...n}},[t,n])}function o(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:i(n.components),r.createElement(s.Provider,{value:t},n.children)}}}]);