"use strict";(self.webpackChunknotebook=self.webpackChunknotebook||[]).push([[78261],{29087:(n,e,i)=>{i.d(e,{R:()=>l,x:()=>c});var t=i(96363);const d={},s=t.createContext(d);function l(n){const e=t.useContext(s);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(d):n.components||d:l(n.components),t.createElement(s.Provider,{value:e},n.children)}},49970:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>r});const t=JSON.parse('{"id":"\u4e86\u89e3/Visibility","title":"Visibility","description":"HTML 5 \u65b0\u589e\u4e86 Page Visibility API ,\u5373\u9875\u9762\u7684\u53ef\u89c1\u6027 API \u3002\u5e94\u7528\u8be5 API \u540e\uff0c\u5728\u6d4f\u89c8\u5668\u53ea\u6709\u5f53\u524d\u6fc0\u6d3b\u7684\u9875\u9762\u5904\u4e8e\u5de5\u4f5c\u72b6\u6001\uff0c\u5176\u4ed6\u9690\u85cf\u7684\u9875\u9762\u6682\u505c\u5de5\u4f5c\uff0c\u4ee5\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u8ba1\u7b97\uff0c\u8017\u8d39\u7cfb\u7edf\u8d44\u6e90\u3002","source":"@site/html/\u4e86\u89e3/Visibility.mdx","sourceDirName":"\u4e86\u89e3","slug":"/\u4e86\u89e3/Visibility","permalink":"/html/\u4e86\u89e3/Visibility","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Visibility","pagination_prev":null},"sidebar":"TrSjaHf3NnyGYO0U","next":{"title":"Fullscreen","permalink":"/html/\u4e86\u89e3/Fullscreen"}}');var d=i(47259),s=i(29087);const l={title:"Visibility",pagination_prev:null},c="PAge Visibility API",o={},r=[{value:"\u57fa\u7840",id:"\u57fa\u7840",level:2},{value:"\u76d1\u542c visibilitychange \u4e8b\u4ef6",id:"\u76d1\u542c-visibilitychange-\u4e8b\u4ef6",level:2}];function a(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...n.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.header,{children:(0,d.jsx)(e.h1,{id:"page-visibility-api",children:"PAge Visibility API"})}),"\n",(0,d.jsx)(e.p,{children:"HTML 5 \u65b0\u589e\u4e86 Page Visibility API ,\u5373\u9875\u9762\u7684\u53ef\u89c1\u6027 API \u3002\u5e94\u7528\u8be5 API \u540e\uff0c\u5728\u6d4f\u89c8\u5668\u53ea\u6709\u5f53\u524d\u6fc0\u6d3b\u7684\u9875\u9762\u5904\u4e8e\u5de5\u4f5c\u72b6\u6001\uff0c\u5176\u4ed6\u9690\u85cf\u7684\u9875\u9762\u6682\u505c\u5de5\u4f5c\uff0c\u4ee5\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u8ba1\u7b97\uff0c\u8017\u8d39\u7cfb\u7edf\u8d44\u6e90\u3002"}),"\n",(0,d.jsx)(e.h2,{id:"\u57fa\u7840",children:"\u57fa\u7840"}),"\n",(0,d.jsx)(e.p,{children:"Page Visibility API \u662f\u4e00\u4e2a\u7b80\u5355\u7684 API \uff0c\u5b83\u5305\u542b\u4e24\u4e2a\u5c5e\u6027\u548c\u4e00\u4e2a\u4e8b\u4ef6\uff1a"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:"document.hidden \uff1a \u5e03\u5c14\u503c\uff0c\u8868\u793a\u9875\u9762\u662f\u5426\u9690\u85cf"}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:"document.visibilityState \uff1a \u8868\u793a\u5f53\u524d\u9875\u9762\u53ef\u89c1\u72b6\u6001\uff1a"}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:"hidden \uff1a \u9875\u9762\u5728\u540e\u53f0\u6807\u7b7e\u9875\u4e2d\uff0c\u6216\u8005\u6d4f\u89c8\u5668\u6700\u5c0f\u5316"}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:"visible \uff1a \u9875\u9762\u5728\u524d\u53f0\u6807\u7b7e\u4e2d"}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:"prerender \uff1a \u9875\u9762\u5728\u5c4f\u5e55\u5916\u6267\u884c\u6e32\u67d3\u5904\u7406\uff0c document.hidden \u7684\u503c\u4e3a true"}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:"unloaded \uff1b \u9875\u9762\u6b63\u5728\u4ece\u5185\u5b58\u4e2d\u5378\u8f7d"}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:"visibilitychange \u4e8b\u4ef6 \uff1a \u5f53\u6587\u6863\u7684\u53ef\u89c1\u53d1\u751f\u6539\u53d8"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.h2,{id:"\u76d1\u542c-visibilitychange-\u4e8b\u4ef6",children:"\u76d1\u542c visibilitychange \u4e8b\u4ef6"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-js",children:"document.addEventListener('visibilitychange', function () {\n  let isHidden = document.hidden;\n  if (isHidden) {\n    document.title = 'i am hidden'; // \u52a8\u753b\u505c\u6b62\n    // \u670d\u52a1\u5668\u8f6e\u8be2\u505c\u6b62\n  } else {\n    document.title = 'i am alive'; // \u52a8\u753b\u5f00\u59cb\n    // \u670d\u52a1\u5668\u8f6e\u8be2\u5f00\u59cb\n  }\n});\n"})}),"\n",(0,d.jsx)(e.p,{children:"\u6d4b\u8bd5\u5404\u6d4f\u89c8\u5668\u5747\u652f\u6301\u8be5\u4e8b\u4ef6\uff0c\u751a\u81f3 IE \u90fd\u652f\u6301"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-js",children:"(function () {\n  let hidden = 'hidden';\n  if (hidden in document)\n    document.addEventListener('visibilitychange', onchange);\n  else if ((hidden = 'mozHidden') in document)\n    document.addEventListener('mozvisibilitychange', onchange);\n  else if ((hidden = 'msHidden') in document)\n    document.addEventListener('msvisibilitychange', onchange);\n  else if ((hidden = 'WebkitHidden') in document)\n    document.addEventListener('Weblitvisibility', onchange);\n  else if ('onfocusin' in document)\n    document.onfocusin = document.onfocusout = onchange;\n  else\n    window.onpageshow =\n      window.onpagehide =\n      window.onfocus =\n      window.onblur =\n        onchange;\n\n  function onchange(event) {\n    let v = 'visible',\n      h = 'hidden',\n      eMap = {\n        focus: v,\n        focusin: v,\n        blur: h,\n        focusout: h,\n        pagehide: h,\n        pageshow: v,\n      };\n    event = event || window.event;\n    if (event.type in eMap) document.body.className = eMap[event.type];\n    else document.body.className = this[hidden] ? 'hidden' : 'visible';\n  }\n  if (document[hidden] !== undefined)\n    onchange({ type: document[hidden] ? 'blur' : 'focus' });\n})();\n"})})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,d.jsx)(e,{...n,children:(0,d.jsx)(a,{...n})}):a(n)}}}]);