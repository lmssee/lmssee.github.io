"use strict";(self.webpackChunknotebook=self.webpackChunknotebook||[]).push([[61493],{29087:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>i});var s=t(96363);const o={},l=s.createContext(o);function r(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(l.Provider,{value:n},e.children)}},90488:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>f,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"js/\u4f4d\u7f6e\u504f\u79fb","title":"\u4f4d\u7f6e\u504f\u79fb","description":"CSS \u7684 left \u548c top \u5c5e\u6027\u4e0d\u80fd\u771f\u5b9e\u53cd\u6620\u5143\u7d20\u76f8\u5bf9\u9875\u9762\u548c\u5176\u5b83\u5bf9\u8c61\u7684\u7cbe\u51c6\u5b9a\u4f4d\uff0c\u4e0d\u8fc7\u6bcf\u4e2a\u5143\u7d20\u90fd\u62e5\u6709 offsetLeft \u548c offsetTop \u5c5e\u6027\uff0c\u5b83\u4eec\u63cf\u8ff0\u4e86\u5143\u7d20\u7684\u504f\u79fb\u4f4d\u7f6e\u3002","source":"@site/css/js/\u4f4d\u7f6e\u504f\u79fb.mdx","sourceDirName":"js","slug":"/js/\u4f4d\u7f6e\u504f\u79fb","permalink":"/css/js/\u4f4d\u7f6e\u504f\u79fb","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u4f4d\u7f6e\u504f\u79fb"},"sidebar":"gVe8msub0nGsB23F","previous":{"title":"\u5143\u7d20\u5927\u5c0f","permalink":"/css/js/\u5143\u7d20\u5927\u5c0f"},"next":{"title":"\u663e\u9690","permalink":"/css/js/\u663e\u9690"}}');var o=t(47259),l=t(29087);const r={title:"\u4f4d\u7f6e\u504f\u79fb"},i="\u7a97\u53e3\u4f4d\u7f6e",a={},d=[{value:"\u76f8\u5bf9\u5b9a\u4f4d",id:"\u76f8\u5bf9\u5b9a\u4f4d",level:2},{value:"\u5b9a\u4f4d\u4f4d\u7f6e",id:"\u5b9a\u4f4d\u4f4d\u7f6e",level:2},{value:"\u8bbe\u7f6e\u504f\u79fb\u4f4d\u7f6e",id:"\u8bbe\u7f6e\u504f\u79fb\u4f4d\u7f6e",level:2},{value:"\u8bbe\u7f6e\u76f8\u5bf9\u4f4d\u7f6e",id:"\u8bbe\u7f6e\u76f8\u5bf9\u4f4d\u7f6e",level:2},{value:"\u9f20\u6807\u6307\u9488\u7edd\u5bf9\u4f4d\u7f6e",id:"\u9f20\u6807\u6307\u9488\u7edd\u5bf9\u4f4d\u7f6e",level:2},{value:"\u9f20\u6807\u6307\u9488\u76f8\u5bf9\u4f4d\u7f6e",id:"\u9f20\u6807\u6307\u9488\u76f8\u5bf9\u4f4d\u7f6e",level:2},{value:"\u6eda\u52a8\u6761\u4f4d\u7f6e",id:"\u6eda\u52a8\u6761\u4f4d\u7f6e",level:2},{value:"\u8bbe\u7f6e\u6eda\u52a8\u6761\u4f4d\u7f6e",id:"\u8bbe\u7f6e\u6eda\u52a8\u6761\u4f4d\u7f6e",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"\u7a97\u53e3\u4f4d\u7f6e",children:"\u7a97\u53e3\u4f4d\u7f6e"})}),"\n",(0,o.jsx)(n.p,{children:"CSS \u7684 left \u548c top \u5c5e\u6027\u4e0d\u80fd\u771f\u5b9e\u53cd\u6620\u5143\u7d20\u76f8\u5bf9\u9875\u9762\u548c\u5176\u5b83\u5bf9\u8c61\u7684\u7cbe\u51c6\u5b9a\u4f4d\uff0c\u4e0d\u8fc7\u6bcf\u4e2a\u5143\u7d20\u90fd\u62e5\u6709 offsetLeft \u548c offsetTop \u5c5e\u6027\uff0c\u5b83\u4eec\u63cf\u8ff0\u4e86\u5143\u7d20\u7684\u504f\u79fb\u4f4d\u7f6e\u3002"}),"\n",(0,o.jsx)(n.p,{children:"IE \u4f1a\u4ee5\u7236\u5143\u7d20\u4e3a\u53c2\u7167\uff0c\u800c\u652f\u6301 DOM \u6807\u51c6\u7684\u6d4f\u89c8\u5668\u4f1a\u4ee5\u6700\u8fd1\u5b9a\u4f4d\u5143\u7d20\u4e3a\u53c2\u7167\u5bf9\u8c61\u8fdb\u884c\u5b9a\u4f4d\u3002"}),"\n",(0,o.jsx)(n.p,{children:"\u4f46\uff0c\u5bf9\u4e8e\u4efb\u4f55\u6d4f\u89c8\u5668\u6765\u8bf4 \uff0c offsetParent \u90fd\u80fd\u8bc6\u522b\u5f53\u524d\u5143\u7d20\u504f\u79fb\u7684\u53c2\u7167\u5bf9\u8c61\u3002\u6240\u4ee5\u4e0d\u7528\u62c5\u5fc3 offsetParent \u6307\u4ee3\u7684\u5143\u7d20\u662f\u8c01\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<style type="text/css">\n  div {\n    width: 200px;\n    height: 100px;\n    border: solid 1px #f00;\n  }\n  #wrap {\n    position: relative;\n    border-width: 20px;\n  }\n</style>\n<div id="wrap">\n  <div id="sup"><div id="box"></div></div>\n</div>\n'})}),"\n",(0,o.jsx)(n.p,{children:"\u4e0d\u7528\u4e3a\u5305\u542b\u5143\u7d20\u5b9a\u4e49\u8fb9\u6846\uff0c\u56e0\u4e3a\u4e0d\u540c\u6d4f\u89c8\u5668\u5bf9\u8fb9\u6846\u7684\u5904\u7406\u4e0d\u540c\u3002\u4f8b\u5982\uff0c IE \u6d4f\u89c8\u5668\u603b\u4f1a\u5ffd\u7565\u6240\u6709\u5305\u542b\u5143\u7d20\u7684\u8fb9\u6846\uff0c\u56e0\u4e3a\u6240\u6709\u5143\u7d20\u90fd\u662f\u53c2\u7167\u7269\uff0c\u4e14\u4ee5\u53c2\u7167\u7269\u5bf9\u8c61\u7684\u8fb9\u6846\u5185\u58c1\u4f5c\u4e3a\u8fb9\u7ebf\u6765\u8ba1\u7b97\u3002 Firefox \u548c Safari\n\u4f1a\u628a\u9759\u6001\u5143\u7d20\u7684\u8fb9\u6846\u5f53\u4f5c\u5b9e\u9645\u8ddd\u79bb\u6765\u8ba1\u7b97\uff0c\u56e0\u4e3a\u5bf9\u5b83\u4eec\u6765\u8bf4\uff0c\u9759\u6001\u5143\u7d20\u4e0d\u4f5c\u4e3a\u53c2\u7167\u7269\u3002\u800c\u5bf9 Opera \u6d4f\u89c8\u5668\u6765\u8bf4\uff0c\u5b83\u6839\u636e\u975e\u9759\u6001\u5143\u7d20\u8fb9\u6846\u7684\u5916\u58c1\u4f5c\u4e3a\u8fb9\u7ebf\u8fdb\u884c\u8ba1\u7b97\uff0c\u6240\u4ee5\u5404\u4e2a\u6d4f\u89c8\u5668\u7684\u53d6\u503c\u4e0d\u540c\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"function getPoint(e) {\n  var x = (y = 0);\n  while (e.offsetParent) {\n    x += e.offsetLeft;\n    y += e.offsetTop;\n    e = e.offsetParent;\n  }\n  return { x: x, y: y };\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u76f8\u5bf9\u5b9a\u4f4d",children:"\u76f8\u5bf9\u5b9a\u4f4d"}),"\n",(0,o.jsx)(n.p,{children:"\u8981\u60f3\u83b7\u5f97\u7edd\u5bf9\u5b9a\u4f4d\uff0c\u5c31\u5fc5\u987b\u77e5\u9053\u5143\u7d20\u4e0e\u7236\u5143\u7d20\u4e4b\u95f4\u7684\u8ddd\u79bb\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"function getP(e) {\n  if (e.parentNode == e.offsetParent) {\n    var x = e.offsetLeft;\n    var y = e.offsetTop;\n  } else {\n    var o = getPoint(e);\n    var p = getPoint(e.patentNode);\n    var x = o.x - p.x;\n    var y = o.y - p.y;\n  }\n  return { x: x, y: y };\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u5b9a\u4f4d\u4f4d\u7f6e",children:"\u5b9a\u4f4d\u4f4d\u7f6e"}),"\n",(0,o.jsx)(n.p,{children:"\u5b9a\u4f4d\u5305\u542b\u6846\u5c31\u662f\u5b9a\u4f4d\u5143\u7d20\u53c2\u7167\u7684\u5305\u542b\u6846\u5bf9\u8c61\u3002\u4e00\u822c\u4e3a\u8ddd\u79bb\u5f53\u524d\u5143\u7d20\u6700\u8fd1\u7684\u4e0a\u7ea7\u5b9a\u4f4d\u5143\u7d20\u3002\u83b7\u53d6\u5b9a\u4f4d\u5143\u7d20\u76f8\u5bf9\u5305\u542b\u6846\u7684\u4f4d\u7f6e\u5c31\u662f\u76f4\u63a5\u8bfb\u53d6 CSS \u4e2d\u7684 left \u548c top \u5c5e\u6027\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"function getB(e) {\n  return {\n    x: parseInt(getStyle(e, 'left')) || 0,\n    y: parseInt(getStyle(e, 'top')) || 0,\n  };\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u8bbe\u7f6e\u504f\u79fb\u4f4d\u7f6e",children:"\u8bbe\u7f6e\u504f\u79fb\u4f4d\u7f6e"}),"\n",(0,o.jsx)(n.p,{children:"\u4e0e\u83b7\u53d6\u5143\u7d20\u4f4d\u7f6e\u76f8\u6bd4\uff0c\u8bbe\u7f6e\u5143\u7d20\u7684\u504f\u79fb\u4f4d\u7f6e\u6bd4\u8f83\u5bb9\u6613\u3002\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 CSS \u8fdb\u884c\u8bbe\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u5c01\u88c5\u51fd\u6570\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"function setP(e, o) {\n  e.style.position || e.style.position == 'absolute';\n  e.style.left = o.x + 'px';\n  e.style.top = o.y + 'px';\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u8bbe\u7f6e\u76f8\u5bf9\u4f4d\u7f6e",children:"\u8bbe\u7f6e\u76f8\u5bf9\u4f4d\u7f6e"}),"\n",(0,o.jsx)(n.p,{children:"\u504f\u79fb\u4f4d\u7f6e\u662f\u91cd\u65b0\u5b9a\u4f4d\u5143\u7d20\u7684\u4f4d\u7f6e\u3002\u4e0d\u8003\u8651\u5143\u7d20\u53ef\u80fd\u5b58\u5728\u7684\u5b9a\u4f4d\u503c\u3002\u4f46\u662f\uff0c\u5728\u52a8\u753b\u8bbe\u8ba1\u4e2d\uff0c\u7ecf\u5e38\u9700\u8981\u8bbe\u7f6e\u5143\u7d20\u5f53\u524d\u4f4d\u7f6e\u4e3a\u8d77\u70b9\u8fdb\u884c\u504f\u79fb\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"function offsetP(e, o) {\n  e.style.position || e.style.position == 'absolute';\n  e.style.left = getB(e).x + o.x + 'px';\n  e.style.top = getB(e).y + o.y + 'px';\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u9f20\u6807\u6307\u9488\u7edd\u5bf9\u4f4d\u7f6e",children:"\u9f20\u6807\u6307\u9488\u7edd\u5bf9\u4f4d\u7f6e"}),"\n",(0,o.jsx)(n.p,{children:"\u8981\u83b7\u53d6\u9f20\u6807\u6307\u9488\u7684\u9875\u9762\u4f4d\u7f6e\uff0c\u5c31\u5fc5\u987b\u6355\u83b7\u5f53\u524d\u4e8b\u4ef6\u5bf9\u8c61\uff0c\u7136\u540e\u8bfb\u53d6\u5bf9\u8c61\u4e2d\u5305\u542b\u7684\u4f4d\u7f6e\u4fe1\u606f\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"function getMP(e) {\n  var e = e || window.event;\n  return {\n    x:\n      e.pageX ||\n      e.clientX +\n        (document.documentElement.scrollLeft || document.body.scrollLeft),\n    y:\n      w.pageY ||\n      e.clientY +\n        (document.documentElement.scrollTop || document.body.scrollTop),\n  };\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u9f20\u6807\u6307\u9488\u76f8\u5bf9\u4f4d\u7f6e",children:"\u9f20\u6807\u6307\u9488\u76f8\u5bf9\u4f4d\u7f6e"}),"\n",(0,o.jsx)(n.p,{children:"\u9664\u4e86\u8003\u8651\u9f20\u6807\u5728\u9875\u9762\u7684\u76f8\u5bf9\u4f4d\u7f6e\u4e4b\u5916\uff0c\u8fd8\u9700\u8981\u8003\u8651\u6307\u6307\u9488\u5728\u5143\u7d20\u5185\u4f4d\u7f6e\u3002\u8fd9\u9700\u8981\u7528\u5230\u4e8b\u4ef6\u5bf9\u8c61\u7684 offsetX/offsetY \u6216 layerX/layerY \u5c5e\u6027\u5bf9\u3002\u7531\u4e8e\u65e9\u671f\u7684 Mozilla \u4e0d\u652f\u6301 offsetX \u548c\noffsetY \u5c5e\u6027\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 layerX \u548c layerY \u5c5e\u6027\u5bf9\u3002\u4f46\u662f\u8fd9\u4e24\u5c5e\u6027\u662f\u4ee5\u5b9a\u4f4d\u5305\u542b\u6846\u4e3a\u53c2\u7167\u7269\uff0c\u800c\u4e0d\u662f\u5143\u7d20\u672c\u8eab\u7684\u5de6\u9876\u89d2\uff0c\u56e0\u6b64\u8fd8\u9700\u8981\u51cf\u53bb\u8be5\u5143\u7d20\u7684 offsetLeft \u548c offsetTop \u503c\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"function getME(e, o) {\n  var e = e || window.event;\n  return {\n    x: e.offsetX || e.layerX - o.offsetLeft,\n    y: e.offsetY || e.layerY - o.offsetTop,\n  };\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u4fee\u6539\u540e\u7684\uff0c\u517c\u5bb9 Mozilla \u548c Safari \u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"function getME(e) {\n  var e = e || window.event;\n  var bl =\n    parseInt(getStyle(o, 'borderLeftWidth')) ||\n    (o.style.borderLeftStyle && o.style.borderLeftStyle != 'none' ? 3 : 0);\n  var bt =\n    parseInt(getStyle(o, 'borderTopWidth')) ||\n    (o.style.borderTopStyle && o.style.borderTopStyle != 'none' ? 3 : 0);\n  var x = e.offsetX || e.layerX - o.offsetLeft - bl;\n  var y = e.offsetY || e.layerY - o.offsetTop - bt;\n  var u = navigator.userAgent;\n  if (\n    u.indexOf('KHTML') > -1 ||\n    u.indexOf('Konqueror') > -1 ||\n    u.indexOf('AppleWebkit') > -1\n  ) {\n    x -= bl;\n    // \u4e3a Safari \u6d4f\u89c8\u5668\u51cf\u53bb\u8fb9\u6846\u5f71\u54cd\n    y -= bt;\n  }\n  return { x: x, y: y };\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u6eda\u52a8\u6761\u4f4d\u7f6e",children:"\u6eda\u52a8\u6761\u4f4d\u7f6e"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"function getPS() {\n  var h = document.documentElement;\n  var x = self.pageXOffset || (h && h.scrollLeft) || document.body.scrollLeft;\n  var y = self.pageYOffset || (h && h.scrollTop) || document.body.scrollTop;\n  return { x: x, y: y };\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u8bbe\u7f6e\u6eda\u52a8\u6761\u4f4d\u7f6e",children:"\u8bbe\u7f6e\u6eda\u52a8\u6761\u4f4d\u7f6e"}),"\n",(0,o.jsx)(n.p,{children:"Window \u5bf9\u8c61\u5b9a\u4e49\u4e86 scrollTo(x,y) \u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u80fd\u591f\u6839\u636e\u4f20\u9012\u7684\u53c2\u6570\u503c\u5b9a\u4f4d\u6eda\u52a8\u6761\u7684\u4f4d\u7f6e\uff0c\u5176\u4e2d\u53c2\u6570 x \u53ef\u4ee5\u5b8b\u4f1f\u9875\u9762\u5185\u5bb9\u5728 x \u8f74\u65b9\u5411\u7684\u504f\u79fb\u91cf\uff0c\u4e8c\u53c2\u6570 y \u53ef\u4ee5\u5b9a\u4f4d\u9875\u9762\u4e2d y \u8f74\u65b9\u5411\u4e0a\u7684\u504f\u79fb\u91cf\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"function setPS(e) {\n  window.scrollTo(getPoint(e).x, getPoint(e).y);\n}\n"})})]})}function f(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);