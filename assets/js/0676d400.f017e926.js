"use strict";(globalThis.webpackChunknotebook=globalThis.webpackChunknotebook||[]).push([[7506],{30159(e,n,t){t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>a,frontMatter:()=>l,metadata:()=>o,toc:()=>m});const o=JSON.parse('{"id":"\u4e86\u89e3/PointerLock","title":"PointerLock","description":"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u5728\u9f20\u6807\u6307\u9488\u9501\u5b9a API \u65f6\uff0c\u9700\u8981\u5728\u9501\u5b9a\u76ee\u6807\u4e4b\u524d\uff0c\u9996\u5148\u5c06\u76ee\u6807\u5143\u7d20\u8bbe\u5b9a\u4e3a\u5168\u5c4f\u6a21\u5f0f\uff0c\u5c06\u6765\u53ef\u80fd\u4f1a\u53d6\u6d88\u8fd9\u4e2a\u9650\u5236\u3002","source":"@site/html/\u4e86\u89e3/PointerLock.mdx","sourceDirName":"\u4e86\u89e3","slug":"/\u4e86\u89e3/PointerLock","permalink":"/html/\u4e86\u89e3/PointerLock","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"PointerLock"},"sidebar":"RRhFQ58Ul1J5KCbn","previous":{"title":"Fullscreen","permalink":"/html/\u4e86\u89e3/Fullscreen"},"next":{"title":"Animation","permalink":"/html/\u4e86\u89e3/Animation"}}');var r=t(56730),c=t(25502);const l={title:"PointerLock"},i="\u9501\u5b9a\u9f20\u6807",s={},m=[{value:"\u9501\u5b9a\u9f20\u6807\u6307\u9488 API",id:"\u9501\u5b9a\u9f20\u6807\u6307\u9488-api",level:2}];function u(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u9501\u5b9a\u9f20\u6807",children:"\u9501\u5b9a\u9f20\u6807"})}),"\n",(0,r.jsx)(n.p,{children:"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u5728\u9f20\u6807\u6307\u9488\u9501\u5b9a API \u65f6\uff0c\u9700\u8981\u5728\u9501\u5b9a\u76ee\u6807\u4e4b\u524d\uff0c\u9996\u5148\u5c06\u76ee\u6807\u5143\u7d20\u8bbe\u5b9a\u4e3a\u5168\u5c4f\u6a21\u5f0f\uff0c\u5c06\u6765\u53ef\u80fd\u4f1a\u53d6\u6d88\u8fd9\u4e2a\u9650\u5236\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u9501\u5b9a\u9f20\u6807\u6307\u9488-api",children:"\u9501\u5b9a\u9f20\u6807\u6307\u9488 API"}),"\n",(0,r.jsx)(n.p,{children:"\u9f20\u6807\u9501\u5b9a API \u65b0\u589e\u4e86\u4e00\u4e2a requestPointerLock() \u65b9\u6cd5\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:"showLineNumbers",children:"e.WebkitRequestPointerLock();\ne.mozRequestPointerLock();\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u9501\u5b9a\u9f20\u6807\u6307\u9488 API \u5904\u7406\u662f\u4e00\u79cd\u5f02\u6b65\u5904\u7406\u65b9\u6cd5\uff0c\u9f20\u6807\u6307\u9488\u9501\u5b9a API \u901a\u8fc7 pointerlockchange \u548c pointerlockerror \u4e8b\u4ef6\u6765\u901a\u77e5\u811a\u672c\u7a0b\u5e8f\u9501\u5b9a\u9f20\u6807\u6307\u9488\u7684\u8bf7\u6c42\u662f\u5426\u6210\u529f\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u9f20\u6807\u6307\u9488\u9501\u5b9a API \u540c\u65f6\u6269\u5c55\u4e86 DOcument \u63a5\u53e3\uff0c\u65b0\u589e\u4e86 document \u5bf9\u8c61\u7684 pointerLockElement \u5c5e\u6027\u548c exitPointerLock() \u65b9\u6cd5\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:"showLineNumbers",children:"if (\n  document.mozPointerLockElement === pointerlockElement ||\n  document.WebkitPointerLockElement === pointerlockElement\n) {\n  location.hash += '\u9f20\u6807\u5df2\u9501\u5b9a';\n} else {\n  location.hash += '\u9f20\u6807\u53ef\u81ea\u7531\u6d3b\u52a8';\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5143\u7d20\u7684 exitPointerLock() \u53ef\u4ee5\u53d6\u6d88\u9f20\u6807\u7684\u9501\u5b9a\uff0c\u56e0\u4e3a\u662f\u4e00\u79cd\u5f02\u6b65\u65b9\u6cd5\uff0c\u53d6\u6d88\u6210\u529f\u5c06\u89e6\u53d1 pointerlockchange \u4e8b\u4ef6\uff0c\u53d6\u6d88\u9501\u5b9a\u5931\u8d25\u5c06\u89e6\u53d1 pointerlockerror \u4e8b\u4ef6\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:"showLineNumbers",children:"let pointerLockElement;\nconst result = document.getElementById('result');\ndocument.addEventListener(\n  'mousemove',\n  function (e) {\n    const movementX = e.movementX || e.mozMovementX || e.webkitMovementX || 0;\n    const movementY = e.movementY || e.mozMovementY || e.webkitMovementY || 0; // \u8f93\u51fa\u9f20\u6807\u6307\u9488\u79fb\u52a8\u4fe1\u606f\n    console.log('movementX=' + movementX + '\uff0c movementY=' + movementY);\n  },\n  false,\n);\n/**\n *\n */\nfunction fullscreenChange() {\n  if (\n    document.webkitFullscreenElement === pointerLockElement ||\n    document.mozFullscreenElement === pointerLockElement ||\n    document.mozFullScreenElement === pointerLockElement\n  ) {\n    // \u5143\u7d20\u5df2\u5904\u4e8e\u5168\u5c4f\u72b6\u6001\uff0c\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u8bf7\u6c42\u9501\u5b9a\u9f20\u6807\u6307\u9488\n    pointerLockElement.requestPointerLock =\n      pointerLockElement.requestPointerLock ||\n      pointerLockElement.mozRequestPointerLock ||\n      pointerLockElement.webkitRequestPointerLock;\n    pointerLockElement.requestPointerLock();\n  }\n}\ndocument.addEventListener('fullscreenchange', fullscreenChange, false);\ndocument.addEventListener('mozfullscreenchange', fullscreenChange, false);\ndocument.addEventListener('webkitfullscreenchange', fullscreenChange, false);\n/**\n *\n */\nfunction pointerLockChange() {\n  if (\n    document.mozPointerLockElement === pointerLockElement ||\n    document.webkitPointerLockElement === pointerLockElement\n  ) {\n    console.log('\u6210\u529f\u9501\u5b9a\u9f20\u6807\u6307\u9488');\n  } else {\n    console.log('\u9f20\u6807\u6307\u9488\u5df2\u88ab\u505c\u6b62\u9501\u5b9a');\n  }\n}\n\ndocument.addEventListener('pointerlockchange', pointerLockChange, false);\ndocument.addEventListener('mozpointerlockchange', pointerLockChange, false);\ndocument.addEventListener('webkitpointerlockchange', pointerLockChange, false);\n/**\n *\n */\nfunction pointerLockError() {\n  console.log('\u9f20\u6807\u6307\u9488\u5b9a\u65f6\u51fa\u73b0\u9519\u8bef');\n}\n\ndocument.addEventListener('pointerlockerror', pointerLockError, false);\ndocument.addEventListener('mozpointerlockerror', pointerLockError, false);\ndocument.addEventListener('webkitpointerlockerror', pointerLockError, false);\n\n/**\n *\n */\nfunction lockPointer() {\n  pointerLockElement = document.getElementById('pointer-lock-element');\n  // \u5c06 id \u4e3a pointer-lock-element \u7684\u5143\u7d20\u8bbe\u4e3a\u5168\u5c4f\u72b6\u6001\n  // \u76ee\u524d\u4e3a\u6b62\u5728\u9488\u5bf9\u67d0\u4e2a\u5143\u7d20\u9501\u5b9a\u9f20\u6807\u6307\u9488\u4e4b\u524d\u9996\u5148\u8981\u5c06\u8be5\u5143\u7d20\u8bbe\u4e3a\u5168\u5c4f\u72b6\u6001\n  // \u672a\u6765\u53ef\u80fd\u4f1a\u53d6\u6d88\u8be5\u9650\u5b9a\n  pointerLockElement.requestFullscreen =\n    pointerLockElement.requestFullscreen ||\n    pointerLockElement.mozRequestFullscreen ||\n    pointerLockElement.mozRequestFullScreen ||\n    pointerLockElement.webkitRequestFullscreen;\n  pointerLockElement.requestFullscreen();\n}\n"})})]})}function a(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},25502(e,n,t){t.d(n,{R:()=>l,x:()=>i});var o=t(10162);const r={},c=o.createContext(r);function l(e){const n=o.useContext(c);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),o.createElement(c.Provider,{value:n},e.children)}}}]);