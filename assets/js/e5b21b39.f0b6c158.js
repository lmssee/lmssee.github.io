"use strict";(self.webpackChunknotebook=self.webpackChunknotebook||[]).push([[24344],{29087:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>o});var n=t(96363);const r={},l=n.createContext(r);function i(e){const s=n.useContext(l);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(l.Provider,{value:s},e.children)}},76919:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>x,frontMatter:()=>i,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"express/\u4f1a\u8bdd session","title":"\u4f1a\u8bdd session","description":"\u5b89\u88c5","source":"@site/NodeJs/express/\u4f1a\u8bdd session.mdx","sourceDirName":"express","slug":"/express/\u4f1a\u8bdd session","permalink":"/NodeJs/express/\u4f1a\u8bdd session","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u4f1a\u8bdd session"},"sidebar":"20RlDqN0gcLo5olY","previous":{"title":"cookie","permalink":"/NodeJs/express/cookie"},"next":{"title":"\u7b80\u5355\u4f8b\u5b50","permalink":"/NodeJs/express/\u7b80\u5355\u4f8b\u5b50"}}');var r=t(47259),l=t(29087);const i={title:"\u4f1a\u8bdd session"},o="\u4f1a\u8bdd",c={},d=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u5f15\u5165",id:"\u5f15\u5165",level:2},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:2},{value:"\u79fb\u9664",id:"\u79fb\u9664",level:2}];function a(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"\u4f1a\u8bdd",children:"\u4f1a\u8bdd"})}),"\n",(0,r.jsx)(s.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,r.jsx)(s.p,{children:"\u5728\u5b89\u88c5 cookie-parser \u540e\u94fe\u5165 express-session \u3002"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sh",children:"npm i -s express-session // mac \u65b0\u7cfb\u7edf\u53ef\u80fd\u9700\u8981\u52a0\u540e\u7f00 --legacy-peer-deps\n"})}),"\n",(0,r.jsx)(s.h2,{id:"\u5f15\u5165",children:"\u5f15\u5165"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-js",children:"import Cookie from 'cookie-parser';\nimport Session from 'express-session';\napp.use(Cookie)(credentials.cookieSecret);\napp.use(Session());\n"})}),"\n",(0,r.jsx)(s.p,{children:"\u4e2d\u95f4\u4ef6 express-session \u63a5\u6536\u4ee5\u4e0b\u9009\u9879\u7684\u914d\u7f6e\u5bf9\u8c61\u3002"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{style:{textAlign:"left"},children:"\u540d\u79f0"}),(0,r.jsx)(s.th,{style:{textAlign:"left"},children:"\u9ed8\u8ba4"}),(0,r.jsx)(s.th,{style:{textAlign:"left"},children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"key"}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"connect.id"}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"\u5b58\u653e\u552f\u4e00\u56de\u8bdd\u6807\u8bc6\u7684 cookie \u540d\u79f0"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"store"}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"\u4e00\u4e2a MemoryStore \u7684\u5b9e\u4f8b"}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"\u4f1a\u8bdd\u50a8\u5b58\u4e86\u5b9e\u4f8b"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"cookie"}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"cookie \u9ed8\u8ba4\u503c"}),(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"\u4f1a\u8bdd cookie \u7684 cookie \u8bbe\u7f6e\uff08 path \u3001 domain \u3001 secure \uff09"})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"\u4f7f\u7528",children:"\u4f7f\u7528"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-js",children:"req.session.userName = 'Tom'; // \u8bbe\u7f6e\u540d\u79f0\u4e3a userName \u7684 session \uff0c\u503c\u4e3a Tom\n"})}),"\n",(0,r.jsx)(s.h2,{id:"\u79fb\u9664",children:"\u79fb\u9664"}),"\n",(0,r.jsx)(s.p,{children:"\u76f4\u63a5\u4f7f\u7528 delete \u79fb\u9664\u8be5\u5c5e\u6027\u5373\u53ef\u3002"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sh",children:"delete req.session.userName;\n"})})]})}function x(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);