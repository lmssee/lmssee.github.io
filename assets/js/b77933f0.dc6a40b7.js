"use strict";(self.webpackChunknotebook=self.webpackChunknotebook||[]).push([[2510],{29087:(n,t,e)=>{e.d(t,{R:()=>s,x:()=>a});var c=e(96363);const l={},r=c.createContext(l);function s(n){const t=c.useContext(r);return c.useMemo(function(){return"function"==typeof n?n(t):{...t,...n}},[t,n])}function a(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:s(n.components),c.createElement(r.Provider,{value:t},n.children)}},65731:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>x,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>c,toc:()=>i});const c=JSON.parse('{"id":"\u753b\u5e03 canvas/\u64cd\u4f5c","title":"\u64cd\u4f5c","description":"canvas \u72b6\u6001\u662f\u6307\u5f53\u524d\u753b\u9762\u7684\u6240\u6709\u6837\u5f0f\u3001\u53d8\u5f62\u3001\u88c1\u5207\u7684\u4e00\u4e2a\u5feb\u7167\uff0c\u4ee5\u5806\uff08 stack \uff09\u7684\u65b9\u5f0f\u4fdd\u5b58\u3002\u4f7f\u7528 save() \u548c restore() \u65b9\u6cd5\u53ef\u4ee5\u4fdd\u5b58\u548c\u6062\u590d canvas \u72b6\u6001\u3002","source":"@site/css/\u753b\u5e03 canvas/\u64cd\u4f5c.mdx","sourceDirName":"\u753b\u5e03 canvas","slug":"/\u753b\u5e03 canvas/\u64cd\u4f5c","permalink":"/css/\u753b\u5e03 canvas/\u64cd\u4f5c","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u64cd\u4f5c"},"sidebar":"gVe8msub0nGsB23F","previous":{"title":"\u586b\u5145","permalink":"/css/\u753b\u5e03 canvas/\u586b\u5145"},"next":{"title":"\u7ec4\u5408","permalink":"/css/\u753b\u5e03 canvas/\u7ec4\u5408"}}');var l=e(47259),r=e(29087);const s={title:"\u64cd\u4f5c"},a="\u4fdd\u5b58\u4e0e\u6062\u590d Canvas \u72b6\u6001",x={},i=[{value:"\u6e05\u9664\u7ed8\u56fe",id:"\u6e05\u9664\u7ed8\u56fe",level:2},{value:"\u79fb\u52a8\u5750\u6807\u7a7a\u95f4",id:"\u79fb\u52a8\u5750\u6807\u7a7a\u95f4",level:2},{value:"\u65cb\u8f6c\u5750\u6807\u7a7a\u95f4",id:"\u65cb\u8f6c\u5750\u6807\u7a7a\u95f4",level:2},{value:"\u7f29\u653e",id:"\u7f29\u653e",level:2},{value:"\u77e9\u9635\u53d8\u6362",id:"\u77e9\u9635\u53d8\u6362",level:2},{value:"\u88c1\u5207\u8def\u5f84",id:"\u88c1\u5207\u8def\u5f84",level:2}];function o(n){const t={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.header,{children:(0,l.jsx)(t.h1,{id:"\u4fdd\u5b58\u4e0e\u6062\u590d-canvas-\u72b6\u6001",children:"\u4fdd\u5b58\u4e0e\u6062\u590d Canvas \u72b6\u6001"})}),"\n",(0,l.jsx)(t.p,{children:"canvas \u72b6\u6001\u662f\u6307\u5f53\u524d\u753b\u9762\u7684\u6240\u6709\u6837\u5f0f\u3001\u53d8\u5f62\u3001\u88c1\u5207\u7684\u4e00\u4e2a\u5feb\u7167\uff0c\u4ee5\u5806\uff08 stack \uff09\u7684\u65b9\u5f0f\u4fdd\u5b58\u3002\u4f7f\u7528 save() \u548c restore() \u65b9\u6cd5\u53ef\u4ee5\u4fdd\u5b58\u548c\u6062\u590d canvas \u72b6\u6001\u3002"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"save() \u65b9\u6cd5\u3002\u8be5\u65b9\u6cd5\u7528\u4e8e\u5c06\u5f53\u524d canvas \u4e2d\u7684\u6240\u6709\u72b6\u6001\u4fe1\u606f\u4fdd\u5b58\u5165\u5806\u4e2d"}),"\n",(0,l.jsx)(t.li,{children:"restore() \u65b9\u6cd5\u3002\u8be5\u65b9\u6cd5\u7528\u4e8e\u5f39\u51fa\u5e76\u5f00\u59cb\u4f7f\u7528\u5806\u6700\u4e0a\u9762\u4fdd\u5b58\u7684\u72b6\u6001\u4fe1\u606f"}),"\n"]}),"\n",(0,l.jsx)(t.p,{children:"\u4f7f\u7528\u72b6\u6001\u4fdd\u5b58\u4e0e\u6062\u590d\u7684\u76ee\u7684\u662f\u9632\u6b62\u7ed8\u5236\u4ee3\u7801\u8fc7\u4e8e\u81a8\u80c0\uff0c\u4f8b\u5982\uff0c\u53ef\u4ee5\u5728\u521b\u5efa\u753b\u5e03\u7684 Context \u5bf9\u8c61\u65f6\u5c31\u628a\u521d\u59cb\u72b6\u6001\u4fdd\u5b58\u4e0b\u6765\uff0c\u8fd9\u6837\uff0c\u5728\u6bcf\u6b21\u91cd\u753b\u65f6\u90fd\u53ef\u4ee5\u76f4\u63a5\u6062\u590d\u6210\u521d\u59cb\u7684\u72b6\u6001\uff0c\u800c\u4e0d\u7528\u6bcf\u6b21\u90fd\u4f7f\u7528 clearRect() \u65b9\u6cd5\u64e6\u9664\u3002"}),"\n",(0,l.jsx)(t.p,{children:"\u4e0a\u4e24\u4e2a\u56fe\u5f62\u4e2d\uff0c\u7b2c\u4e00\u4e2a\u7ed8\u5236\u5b8c\u7b2c\u4e00\u4e2a\u65b9\u5757\uff0c\u7ed8\u5236\u5b8c\u6210\u540e\u4fdd\u5b58\u72b6\u6001\uff0c\u5e76\u5728\u7b2c\u4e8c\u4e2a\u4e4b\u540e\u6062\u590d\u3002\u800c\u7b2c\u4e8c\u4e2a\u672a\u4fdd\u5b58\uff0c\u6240\u4ee5\u5728\u7ed8\u5236\u5b8c\u6210\u540e\uff0c\u4f9d\u65e7\u91c7\u7528\u7b2c\u4e8c\u4e2a\u65b9\u5757\u7684\u6837\u5f0f\u3002"}),"\n",(0,l.jsx)(t.h2,{id:"\u6e05\u9664\u7ed8\u56fe",children:"\u6e05\u9664\u7ed8\u56fe"}),"\n",(0,l.jsx)(t.p,{children:"\u4f7f\u7528 clearRect(x,y,width,height) \u65b9\u6cd5\u6e05\u9664\u6307\u5b9a\u533a\u57df\u5185\u7ed8\u5236\u7684\u56fe\u5f62\uff0c"}),"\n",(0,l.jsx)(t.h2,{id:"\u79fb\u52a8\u5750\u6807\u7a7a\u95f4",children:"\u79fb\u52a8\u5750\u6807\u7a7a\u95f4"}),"\n",(0,l.jsx)(t.p,{children:"\u753b\u5e03\u7684\u5750\u6807\u7a7a\u95f4\u9ed8\u8ba4\u4ee5\u753b\u5e03\u5de6\u4e0a\u89d2\uff08 0,0 \uff09\u4e3a\u539f\u70b9\uff0c x \u8f74\u6c34\u5e73\u5411\u53f3\u4e3a\u6b63\u5411\uff0c y \u8f74\u5782\u76f4\u5411\u4e0b\u4e3a\u6b63\u5411\uff0c\u8be5\u5750\u6807\u7a7a\u95f4\u7684\u5355\u4f4d\u901a\u5e38\u4e3a\u50cf\u7d20\u3002\u5728\u7ed8\u5236\u56fe\u5f62\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 translate\n\u65b9\u6cd5\u79fb\u52a8\u5750\u6807\u7a7a\u95f4\uff0c\u4f7f\u753b\u5e03\u7684\u53d8\u6362\u77e9\u9635\u53d1\u751f\u6c34\u5e73\u548c\u5782\u76f4\u65b9\u5411\u7684\u504f\u79fb\u3002"}),"\n",(0,l.jsx)(t.h2,{id:"\u65cb\u8f6c\u5750\u6807\u7a7a\u95f4",children:"\u65cb\u8f6c\u5750\u6807\u7a7a\u95f4"}),"\n",(0,l.jsx)(t.p,{children:"rotate \u65b9\u6cd5\u7528\u4e8e\u4ee5\u539f\u70b9\u4e3a\u4e2d\u5fc3\u65cb\u8f6c Canvas \uff0c\u5b9e\u8d28\u4ecd\u662f\u65cb\u8f6c Canvas \u4e0a\u4e0b\u6587\u5bf9\u8c61\u7684\u5750\u6807\u7a7a\u95f4\u3002"}),"\n",(0,l.jsx)(t.h2,{id:"\u7f29\u653e",children:"\u7f29\u653e"}),"\n",(0,l.jsx)(t.p,{children:"\u4f7f\u7528 scale(x,y) \u65b9\u6cd5\u53ef\u4ee5\u7f29\u653e\u5f53\u524d\u6240\u7ed8\u56fe\u5f62\uff0c x \u4e3a\u6a2a\u8f74\u7f29\u653e\u56e0\u5b50\uff0c y \u4e3a\u7eb5\u8f74\u7f29\u653e\u56e0\u5b50\u3002"}),"\n",(0,l.jsx)(t.h2,{id:"\u77e9\u9635\u53d8\u6362",children:"\u77e9\u9635\u53d8\u6362"}),"\n",(0,l.jsx)(t.p,{children:"transform \u65b9\u6cd5\u7528\u4e8e\u76f4\u63a5\u5bf9\u53d8\u5f62\u77e9\u9635\u4f5c\u4fee\u6539\uff0c\u5373\u8fdb\u884c\u77e9\u9635\u53d8\u6362\u3002\u77e9\u9635\u53d8\u6362\u5e38\u7528\u4e8e\u5750\u6807\u53d8\u6362\u4e0d\u80fd\u8fbe\u5230\u9884\u671f\u6548\u679c\u7684\u60c5\u51b5\uff0c\u80fd\u591f\u5b9e\u73b0\u6bd4\u666e\u901a\u7684\u5750\u6807\u53d8\u6362\u66f4\u4e3a\u590d\u6742\u7684\u53d8\u5f62\u3002"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-js",children:"transform(a, b, c, d, e, f);\n"})}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"a \uff1a\u6c34\u5e73\u7f29\u653e\u7ed8\u56fe"}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"b \uff1a\u6c34\u5e73\u503e\u659c\u7ed8\u56fe"}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"c \uff1a\u5782\u76f4\u503e\u659c\u7ed8\u56fe"}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"d \uff1a\u5782\u76f4\u7f29\u653e\u7ed8\u56fe"}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"e \uff1a\u6c34\u5e73\u79fb\u52a8\u7ed8\u56fe"}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"f \uff1a\u5782\u76f4\u79fb\u52a8\u7ed8\u56fe"}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"translate(x,y) \u53ef\u4ee5\u7528 transform \u65b9\u6cd5\u6765\u4ee3\u66ff context.transform(0,1,1,0,dx,dy); \u6216 context.transform(1,0,0,1,dx,dy);"}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"scale(x,y) \u53ef\u4ee5\u7528\u4e0b\u9762\u7684 transform \u65b9\u6cd5\u6765\u4ee3\u66ff context.transform(m11,0,0,m22,0,0); \u6216 context.transform(0,m12,m21,0,0,0);"}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"rotate(angle) \u6bd4\u8f83\u590d\u6742\u4e00\u4e9b\uff0c\u9700\u8981\u7528\u5230\u4e09\u89d2\u51fd\u6570\u7684\u77e5\u8bc6\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684 transform \u65b9\u6cd5\u6765\u4ee3\u66ff context.transform(cos \u03b8 ,sin \u03b8 ,- sin \u03b8 , cos \u03b8\n,0,0);"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(t.h2,{id:"\u88c1\u5207\u8def\u5f84",children:"\u88c1\u5207\u8def\u5f84"}),"\n",(0,l.jsx)(t.p,{children:"clip \u65b9\u6cd5\u7528\u4e8e\u88c1\u5207\u8def\u5f84\uff0c\u5176\u539f\u7406\u4e0e\u7ed8\u5236\u666e\u901a Canvas \u56fe\u5f62\u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7 clip \u7684\u4f5c\u7528\u662f\u5f62\u6210\u4e00\u4e2a\u8499\u7248\uff0c\u6ca1\u6709\u88ab\u8499\u7248\u7684\u533a\u57df\u4f1a\u88ab\u9690\u85cf\u3002"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-js",children:'function l*1_drawTop(ctx, fillStyle) {\nctx.fillStyle = fillStyle;\nctx.beginPath();\nctx.arc(0, 0, 30, 0, Math.PI, true);\nctx.closePath();\nctx.fill();\n} function l_1_drawGrip(ctx) {\n// ctx.save();\nctx.fillStyle = "blue";\nctx.fillRect(-1.5, 0, 1.5, 40);\nctx.beginPath();\nctx.strokeStyle = "blue";\nctx.arc(-5, 40, 4, Math.PI, Math.PI * 2, true);\nctx.stroke();\nctx.closePath();\n// ctx.restore();\n}\n// function l*1_draw() {\nvar ctx = document.getElementById(\'l_11\').getContext("2d");\n// \u6ce8\u610f\uff1a\u6240\u6709\u7684\u79fb\u52a8\u90fd\u662f\u57fa\u4e8e\u8fd9\u4e00\u4e0a\u4e0b\u6587\nctx.translate(100, 80);\nfor (var i = 1; i < 10; i++) {\nctx.save();\nctx.translate(60 * i, 0);\nl*1_drawTop(ctx, "rgb(" + (10 * i) + "," + (255 - 40* i) + ",125)");\nl_1_drawGrip(ctx);\nctx.restore();\n} function l_2_drawTop(ctx, fillStyle) {\nctx.fillStyle = fillStyle;\nctx.beginPath();\nctx.arc(0, 0, 30, 0, Math.PI, true);\nctx.closePath();\nctx.fill();\n} function l_2_drawGrip(ctx) {\nctx.save();\nctx.fillStyle = "blue";\nctx.fillRect(-1.5, 0, 1.5, 40);\nctx.beginPath();\nctx.strokeStyle = "blue";\nctx.arc(-5, 40, 4, Math.PI, Math.PI * 2, true);\nctx.stroke();\nctx.closePath();\nctx.restore();\n}\nvar ctx = document.getElementById(\'l*12\').getContext("2d");\nctx.translate(150, 150);\nfor (var i = 1; i < 9; i++) {\nctx.save();\nctx.rotate(Math.PI * (2 / 4 + i / 4));\nctx.translate(0, -100);\nl*2_drawTop(ctx, "rgb(" + (20 * i) + "," + (255 - 40\\_ i) + ",125)");\nl_2_drawGrip(ctx);\nctx.restore();\n}\nvar ctx = document.getElementById(\'l_13\').getContext("2d");\nctx.translate(200, 20);\nfor (var i = 1; i < 90; i++) {\nctx.save();\nctx.transform(0.95, 0, 0, 0.95, 30, 30);\nctx.rotate(Math.PI / 12);\nctx.beginPath();\nctx.fillStyle = "#00aaaa";\nctx.globalAlpha = "0.4";\nctx.arc(0, 0, 50, 0, Math.PI \\* 2, true);\nctx.closePath();\nctx.fill();\n}\nctx.setTransform(1, 0, 0, 1, 10, 10);\nctx.fillStyle = "blue";\nctx.fillRect(0, 0, 50, 50);\nctx.fill();\nvar c = document.getElementById("l_9");\nvar context = c.getContext("2d");\n// \u5f00\u59cb\u7ed8\u5236\u77e9\u5f62\ncontext.fillStyle = "#ff00ff";\ncontext.strokeStyle = "blue";\ncontext.fillRect(20, 20, 100, 100);\ncontext.strokeRect(20, 20, 100, 100);\ncontext.fill();\ncontext.stroke();\n// \u4fdd\u5b58\u5f53\u524d Canvas \u72b6\u6001\ncontext.save();\n// \u7ed8\u5236\u53e6\u5916\u4e00\u4e2a\u77e9\u5f62\ncontext.fillStyle = "#ff0000";\ncontext.strokeStyle = "#ffff00";\ncontext.fillRect(140, 20, 100, 100);\ncontext.strokeRect(140, 20, 100, 100);\ncontext.fill();\ncontext.stroke();\n// \u6062\u590d\u7b2c\u4e00\u4e2a\u77e9\u5f62\u7684\u72b6\u6001\ncontext.restore();\n// \u7ed8\u5236\u4e24\u4e2a\u77e9\u5f62\ncontext.fillRect(20, 140, 50, 50);\ncontext.strokeRect(80, 140, 50, 50);\nvar c = document.getElementById("l_10");\nvar context = c.getContext("2d");\n// \u5f00\u59cb\u7ed8\u5236\u77e9\u5f62\ncontext.fillStyle = "#ff00ff";\ncontext.strokeStyle = "blue";\ncontext.fillRect(20, 20, 100, 100);\ncontext.strokeRect(20, 20, 100, 100);\ncontext.fill();\ncontext.stroke();\n// \u4fdd\u5b58\u5f53\u524d Canvas \u72b6\u6001\ncontext.save();\n// \u7ed8\u5236\u53e6\u5916\u4e00\u4e2a\u77e9\u5f62\ncontext.fillStyle = "#ff0000";\ncontext.strokeStyle = "#ffff00";\ncontext.fillRect(140, 20, 100, 100);\ncontext.strokeRect(140, 20, 100, 100);\ncontext.fill();\ncontext.stroke();\n// \u6062\u590d\u7b2c\u4e00\u4e2a\u77e9\u5f62\u7684\u72b6\u6001\n// context.restore();\n// \u7ed8\u5236\u4e24\u4e2a\u77e9\u5f62\ncontext.fillRect(20, 140, 50, 50);\ncontext.strokeRect(80, 140, 50, 50);\n'})})]})}function d(n={}){const{wrapper:t}={...(0,r.R)(),...n.components};return t?(0,l.jsx)(t,{...n,children:(0,l.jsx)(o,{...n})}):o(n)}}}]);