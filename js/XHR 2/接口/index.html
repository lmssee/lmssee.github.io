<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-sidebar_js docs-version-current docs-doc-page docs-doc-id-XHR 2/接口" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">接口 | 花生亻</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lmssee.github.io/icon/dev/android-chrome-512x512.png"><meta data-rh="true" name="twitter:image" content="https://lmssee.github.io/icon/dev/android-chrome-512x512.png"><meta data-rh="true" property="og:url" content="https://lmssee.github.io/js/XHR 2/接口"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="og:title" content="${title} ***"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-sidebar_js-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-sidebar_js-current"><meta data-rh="true" property="og:title" content="接口 | 花生亻"><meta data-rh="true" name="description" content="XMLHttpRequest 是 AJAX 中最核心的技术。它是一个具有应用程序接口的 JavaScript 对象，能够使用超文本传输协议（ HTTP ）连接一个服务器，是微软公司为了满足开发者的需要，于 1999 年在 IE"><meta data-rh="true" property="og:description" content="XMLHttpRequest 是 AJAX 中最核心的技术。它是一个具有应用程序接口的 JavaScript 对象，能够使用超文本传输协议（ HTTP ）连接一个服务器，是微软公司为了满足开发者的需要，于 1999 年在 IE"><link data-rh="true" rel="icon" href="/icon/dev/favicon.ico"><link data-rh="true" rel="canonical" href="https://lmssee.github.io/js/XHR 2/接口"><link data-rh="true" rel="alternate" href="https://lmssee.github.io/js/XHR 2/接口" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://lmssee.github.io/js/XHR 2/接口" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"XHR 2","item":"https://lmssee.github.io/js/XHR 2/"},{"@type":"ListItem","position":2,"name":"接口","item":"https://lmssee.github.io/js/XHR 2/接口"}]}</script><link rel="manifest" href="/icon/dev/site.webmanifest"><link rel="stylesheet" href="/assets/css/styles.2d9f5997.css">
<script src="/assets/js/runtime~main.7b7417cd.js" defer="defer"></script>
<script src="/assets/js/main.332d7057.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/icon/dev/logo.png"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_olov" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/icon/dev/logo.png" alt="花生亻" class="themedComponent_tTV3 themedComponent--light_I0gH"><img src="/icon/dev/logo.png" alt="花生亻" class="themedComponent_tTV3 themedComponent--dark_lUFN"></div><b class="navbar__title text--truncate">花生亻</b></a><a class="navbar__item navbar__link" href="/html">html</a><a class="navbar__item navbar__link" href="/css">css</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/js">js</a><a class="navbar__item navbar__link" href="/git">git</a><a class="navbar__item navbar__link" href="/mySQL">mySQL</a><a class="navbar__item navbar__link" href="/linux">linux</a><a class="navbar__item navbar__link" href="/markdown">markdown</a><a class="navbar__item navbar__link" href="/reader">reader</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://earthnut.pages.dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">earthnut UI<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_d360"><use href="#theme-svg-external-link"></use></svg></a><a href="https://earthnote.pages.dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">速记<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_d360"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/earthnutDev/earthnutDev.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_d360"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_XI8X colorModeToggle_elSY"><button class="clean-btn toggleButton_lzvV toggleButtonDisabled_qWFz" type="button" disabled="" title="浅色模式" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_P4Cx lightToggleIcon_GWfa"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_P4Cx darkToggleIcon_RfaZ"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_P4Cx systemToggleIcon_klML"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_S0qb"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_rttx"><div class="docsWrapper_JUQD"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_Wsfm" type="button"></button><div class="docRoot_CXwW"><aside class="theme-doc-sidebar-container docSidebarContainer_tuo1"><div class="sidebarViewport_DWrm"><div class="sidebar_eVeI"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_JhoZ"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist" href="/js/基础/"><span title="基础" class="categoryLinkLabel_K5XA">基础</span></a><button aria-label="展开侧边栏分类 &#x27;基础&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist" href="/js/数值/"><span title="数值" class="categoryLinkLabel_K5XA">数值</span></a><button aria-label="展开侧边栏分类 &#x27;数值&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist" href="/js/字符串/"><span title="字符串" class="categoryLinkLabel_K5XA">字符串</span></a><button aria-label="展开侧边栏分类 &#x27;字符串&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist" href="/js/数组/"><span title="数组" class="categoryLinkLabel_K5XA">数组</span></a><button aria-label="展开侧边栏分类 &#x27;数组&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist" href="/js/函数/"><span title="函数" class="categoryLinkLabel_K5XA">函数</span></a><button aria-label="展开侧边栏分类 &#x27;函数&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist" href="/js/对象/"><span title="对象" class="categoryLinkLabel_K5XA">对象</span></a><button aria-label="展开侧边栏分类 &#x27;对象&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist" href="/js/原型/"><span title="原型" class="categoryLinkLabel_K5XA">原型</span></a><button aria-label="展开侧边栏分类 &#x27;原型&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist" href="/js/BOM/"><span title="BOM" class="categoryLinkLabel_K5XA">BOM</span></a><button aria-label="展开侧边栏分类 &#x27;BOM&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist" href="/js/DOM/"><span title="DOM" class="categoryLinkLabel_K5XA">DOM</span></a><button aria-label="展开侧边栏分类 &#x27;DOM&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist" href="/js/事件 event/"><span title="事件 event" class="categoryLinkLabel_K5XA">事件 event</span></a><button aria-label="展开侧边栏分类 &#x27;事件 event&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist" href="/js/表单/"><span title="表单" class="categoryLinkLabel_K5XA">表单</span></a><button aria-label="展开侧边栏分类 &#x27;表单&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist" href="/js/json/"><span title="json" class="categoryLinkLabel_K5XA">json</span></a><button aria-label="展开侧边栏分类 &#x27;json&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist" href="/js/ajax/"><span title="ajax" class="categoryLinkLabel_K5XA">ajax</span></a><button aria-label="展开侧边栏分类 &#x27;ajax&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist menu__link--active" href="/js/XHR 2/"><span title="XHR 2" class="categoryLinkLabel_K5XA">XHR 2</span></a><button aria-label="折叠侧边栏分类 &#x27;XHR 2&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/js/XHR 2/基础"><span title="基础" class="linkLabel_cEdv">基础</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/js/XHR 2/处理值"><span title="处理值" class="linkLabel_cEdv">处理值</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/js/XHR 2/跨域"><span title="跨域" class="linkLabel_cEdv">跨域</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/js/XHR 2/ArrayBuffer"><span title="ArrayBuffer" class="linkLabel_cEdv">ArrayBuffer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/js/XHR 2/Blob"><span title="Blob" class="linkLabel_cEdv">Blob</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/js/XHR 2/text"><span title="text" class="linkLabel_cEdv">text</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/js/XHR 2/form"><span title="form" class="linkLabel_cEdv">form</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/js/XHR 2/file"><span title="file" class="linkLabel_cEdv">file</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/js/XHR 2/接口"><span title="接口" class="linkLabel_cEdv">接口</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/js/XHR 2/案例"><span title="案例" class="linkLabel_cEdv">案例</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/js/XHR 2/重构"><span title="重构" class="linkLabel_cEdv">重构</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/js/XHR 2/一些"><span title="一些" class="linkLabel_cEdv">一些</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist" href="/js/history/"><span title="history" class="categoryLinkLabel_K5XA">history</span></a><button aria-label="展开侧边栏分类 &#x27;history&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist" href="/js/优化/"><span title="优化" class="categoryLinkLabel_K5XA">优化</span></a><button aria-label="展开侧边栏分类 &#x27;优化&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_ZXdW menu__link menu__link--sublist" href="/js/es 6/"><span title="es 6" class="categoryLinkLabel_K5XA">es 6</span></a><button aria-label="展开侧边栏分类 &#x27;es 6&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_P9Ku"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_LOkC"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_i3mw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_hwEg"><div class="docItemContainer_Polr"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_N69G" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_i1gB"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/js/XHR 2/"><span>XHR 2</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">接口</span></li></ul></nav><div class="tocCollapsible_Z044 theme-doc-toc-mobile tocMobile_Nh_t"><button type="button" class="clean-btn tocCollapsibleButton_lzX1">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>接口</h1></header>
<p>XMLHttpRequest 是 AJAX 中最核心的技术。它是一个具有应用程序接口的 JavaScript 对象，能够使用超文本传输协议（ HTTP ）连接一个服务器，是微软公司为了满足开发者的需要，于 1999 年在 IE
5.0
浏览器中率先推出的。现在许多浏览器都对其提供了支持，不过实现方式与 IE 有所不同。使用 XMLHttpRequest 对象， AJAX
可以像桌面应用程序一样只与服务器进行数据层面的交换，而不用每次都刷新页面，也不用每次都将数据处理的工作交给服务器来做，这样既减轻了服务器负担，又加快了响应速度、缩短了用户等待的时间。</p>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="初始化-xmlhttprequest-对象">初始化 XMLHttpRequest 对象<a href="#初始化-xmlhttprequest-对象" class="hash-link" aria-label="初始化 XMLHttpRequest 对象的直接链接" title="初始化 XMLHttpRequest 对象的直接链接" translate="no">​</a></h2>
<p>在使用 XMLHttpRequest 对象发送请求和处理响应之前，首先需要初始化该对象。由于 XMLHttpRequest 不是一个 W3C
标准，所以对于不同的浏览器，初始化的方法也是不同的。通常情况下，初始化 XMLHttpRequest 对象只需要考虑两种情况，一种是 IE 浏览器，另一种是非 IE 浏览器。下面分别进行介绍。</p>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="ie-浏览器">IE 浏览器<a href="#ie-浏览器" class="hash-link" aria-label="IE 浏览器的直接链接" title="IE 浏览器的直接链接" translate="no">​</a></h2>
<p>IE 浏览器把 XMLHttpRequest 实例化为一个 ActiveX 对象，具体方法如下：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> http_request </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Msxml2.XMLHTTP&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 或者</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> http_request </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Microsoft.XMLHTTP&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>在上面的语法中， Msxml2.XMLHTTP 和 Microsoft.XMLHTTP 是针对 IE 浏览器的不同版本而进行设置的，目前比较常用的是这两种。</p>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="2-非-ie-浏览器">2. 非 IE 浏览器<a href="#2-非-ie-浏览器" class="hash-link" aria-label="2. 非 IE 浏览器的直接链接" title="2. 非 IE 浏览器的直接链接" translate="no">​</a></h2>
<p>非 IE 浏览器（如 Firefox 、 Opera 、 Mozilla 、 Safari ）把 XMLHttpRequest 对象实例化为一个本地 JavaScript 对象。具体方法如下：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> http_request </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">XMLHttpRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>为了提高程序的兼容性，可以创建一个跨浏览器的 <code>XMLHttpRequest</code> 对象。创建一个跨浏览器的 <code>XMLHttpRequest</code> 对象其实很简单，只需要判断一下不同浏览器的实现方式，如果浏览器提供了 <code>XMLHttpRequest</code> 类，则直接创建一个该类的实例，否则实例化一个 ActiveX 对象。具体代码如下：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 非 IE 浏览器 http_request=new</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">XMLHttpRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function maybe-class-name" style="color:#d73a49">XMLHttpRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//IE 浏览器</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http_request </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Msxml2.XMLHTTP&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      http_request </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Microsoft.XMLHTTP&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>在上面的代码中，调用 <code>window.ActiveXObject</code> 将返回一个对象，或是 <code>null</code> ，在 <code>if</code> 语句中，会把返回值看作 <code>true</code> 或 <code>false</code> （如果返回的是一个对象，则为 true ，否则返回 <code>null</code> ，则为 <code>false</code> ）。</p>
<p>说明　由于 JavaScript 具有动态类型特性，而且 <code>XMLHttpRequest</code> 对象在不同浏览器上的实例是兼容的，所以可以用同样的方式访问 <code>XMLHttpRequest</code> 实例的属性的方法，不需要考虑创建该实例的方法是什么。</p>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="xmlhttprequest-对象的常用属性">XMLHttpRequest 对象的常用属性<a href="#xmlhttprequest-对象的常用属性" class="hash-link" aria-label="XMLHttpRequest 对象的常用属性的直接链接" title="XMLHttpRequest 对象的常用属性的直接链接" translate="no">​</a></h2>
<p><code>XMLHttpRequest</code> 对象提供了一些常用属性。通过这些属性，可以获取服务器的响应状态及响应内容等。下面将对 <code>XMLHttpRequest</code> 对象的常用属性进行介绍。</p>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="指定状态改变时所触发的事件处理器的属性">指定状态改变时所触发的事件处理器的属性<a href="#指定状态改变时所触发的事件处理器的属性" class="hash-link" aria-label="指定状态改变时所触发的事件处理器的属性的直接链接" title="指定状态改变时所触发的事件处理器的属性的直接链接" translate="no">​</a></h2>
<p><code>XMLHttpRequest</code> 对象提供了用于指定状态改变时所触发的事件处理器的属性 <code>onreadystatechange</code> 。在 <code>AJAX</code> 中，每个状态改变时都会触发这个事件处理器，通常会调用一个 JavaScript 函数。</p>
<p>通过下面的代码可以实现当指定状态改变时所要触发的 JavaScript 函数，这里为 getResult 。</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">http_request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">onreadystatechange</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> getResult</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>注意　在指定所触发的事件处理器时，所调用的 <code>JavaScript</code> 函数不能添加小括号及指定参数名。不过这里可以使用匿名函数。例如，要调用带参数的函数 <code>getResult</code> ，可以使用下面的代码：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//通过匿名函数指定要带参数的函数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http_request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">onreadystatechange</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">getResult</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;$1加的参数 &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 调用带参数的函数</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="获取请求状态的属性">获取请求状态的属性<a href="#获取请求状态的属性" class="hash-link" aria-label="获取请求状态的属性的直接链接" title="获取请求状态的属性的直接链接" translate="no">​</a></h2>
<p>XMLHttpRequest 对象提供了用于获取请求状态的属性 readyState 。</p>
<table><thead><tr><th style="text-align:left">值</th><th style="text-align:left">额</th></tr></thead><tbody><tr><td style="text-align:left">0</td><td style="text-align:left">未初始化</td></tr><tr><td style="text-align:left">1</td><td style="text-align:left">正在加载</td></tr><tr><td style="text-align:left">2</td><td style="text-align:left">已加载</td></tr><tr><td style="text-align:left">3</td><td style="text-align:left">交互中</td></tr><tr><td style="text-align:left">4</td><td style="text-align:left">完成</td></tr></tbody></table>
<p>在实际应用中，该属性经常用于判断请求状态，当请求状态等于 4 ，也就是为完成时，再判断请求是否成功，如果成功，将开始处理返回结果。</p>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="获取服务器的字符串响应的属性">获取服务器的字符串响应的属性<a href="#获取服务器的字符串响应的属性" class="hash-link" aria-label="获取服务器的字符串响应的属性的直接链接" title="获取服务器的字符串响应的属性的直接链接" translate="no">​</a></h2>
<p>XMLHttpRequest 对象提供了用于获取服务器响应的属性 responseText ，表示为字符串。例如，获取服务器返回的字符串响应，并赋值给变量 h 可以使用下面的代码：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> h </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> http_request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">responseText</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="获取服务器的-xml-响应的属性">获取服务器的 XML 响应的属性<a href="#获取服务器的-xml-响应的属性" class="hash-link" aria-label="获取服务器的 XML 响应的属性的直接链接" title="获取服务器的 XML 响应的属性的直接链接" translate="no">​</a></h2>
<p>XMLHttpRequest 对象提供了用于获取服务器响应的属性 <code>responseXML</code> ，表示为 <code>XML</code> 。这个对象可以解析为一个 <code>DOM</code> 对象。例如，获取服务器返回的 <code>XML</code> 响应，并赋值给变量 <code>xmlDoc</code></p>
<p>可以使用下面的代码：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> xmlDoc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> http_request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">responseXML</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>在上面的代码中， <code>http_request</code> 为 <code>XMLHttpRequest</code> 对象。</p>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="返回服务器的-http-状态码的属性">返回服务器的 HTTP 状态码的属性<a href="#返回服务器的-http-状态码的属性" class="hash-link" aria-label="返回服务器的 HTTP 状态码的属性的直接链接" title="返回服务器的 HTTP 状态码的属性的直接链接" translate="no">​</a></h2>
<p><code>XMLHttpRequest</code> 对象提供了用于返回服务器的 HTTP 状态码的属性 <code>status</code> 。该属性的语法格式如下：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">http_request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>http_request ： XMLHttpRequest 对象。</p>
<p>返回值：长整型的数值，代表服务器的 HTTP 状态码。</p>
<table><thead><tr><th style="text-align:left">值</th><th style="text-align:left">额</th></tr></thead><tbody><tr><td style="text-align:left">100</td><td style="text-align:left">继续发送请求</td></tr><tr><td style="text-align:left">200</td><td style="text-align:left">请求已成功</td></tr><tr><td style="text-align:left">202</td><td style="text-align:left">请求被接受，到尚未成功</td></tr><tr><td style="text-align:left">400</td><td style="text-align:left">错误的请求</td></tr><tr><td style="text-align:left">404</td><td style="text-align:left">请求未找到</td></tr><tr><td style="text-align:left">408</td><td style="text-align:left">请求超时</td></tr><tr><td style="text-align:left">500</td><td style="text-align:left">内部服务器错误</td></tr><tr><td style="text-align:left">501</td><td style="text-align:left">服务器不支持当前请求的某一个功能</td></tr></tbody></table>
<p>status 属性只能在 send 方法返回成功时才有效。</p>
<p>status 属性常用于当请求状态为完成时，判断当前的服务器状态是否成功。例如，当请求完成时，判断请求是否成功的代码如下：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">http_request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">readyState</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 当请求状态为完成时</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">http_request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 请求成功，开始处理返回结果</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;$1 求成功！ &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 请求未成功</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;$1 求未成功！ &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="xmlhttprequest-对象的常用方法">XMLHttpRequest 对象的常用方法<a href="#xmlhttprequest-对象的常用方法" class="hash-link" aria-label="XMLHttpRequest 对象的常用方法的直接链接" title="XMLHttpRequest 对象的常用方法的直接链接" translate="no">​</a></h2>
<p>XMLHttpRequest 对象提供了一些常用的方法，通过这些方法可以对请求进行操作。</p>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="创建新请求的方法">创建新请求的方法<a href="#创建新请求的方法" class="hash-link" aria-label="创建新请求的方法的直接链接" title="创建新请求的方法的直接链接" translate="no">​</a></h2>
<p>open 方法用于设置进行异步请求目标的 URL 、请求方法以及其它参数信息。</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;method&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;URL&quot;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">asyncFlag</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;userName&quot;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<table><thead><tr><th style="text-align:left">值</th><th style="text-align:left">额</th></tr></thead><tbody><tr><td style="text-align:left">method</td><td style="text-align:left">请求的类型，有 GET/POST</td></tr><tr><td style="text-align:left">URL</td><td style="text-align:left">请求的地址，可传递查询字符串</td></tr><tr><td style="text-align:left">asyncFlag</td><td style="text-align:left">可选参数，请求方式，异步请求为 true, 同步请求为 false, ，默认为 true</td></tr><tr><td style="text-align:left">userName</td><td style="text-align:left">可选参数，用于指定用户名，没有时可省略</td></tr><tr><td style="text-align:left">passWord</td><td style="text-align:left">可选参数，用于请求的密码，没有时可省略</td></tr></tbody></table>
<p>设置异步请求目标为 deal.jsp ，请求方法为 GET ，请求方式为异步的代码如下：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">http_request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;GET&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;deal.jsp&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="向服务器发送请求的方法">向服务器发送请求的方法<a href="#向服务器发送请求的方法" class="hash-link" aria-label="向服务器发送请求的方法的直接链接" title="向服务器发送请求的方法的直接链接" translate="no">​</a></h2>
<p>send 方法用于向服务器发送请求。如果请求声明为异步，该方法将立即返回，否则将等到接收到响应为止。 send 方法的语法格式如下：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">content</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>参数 content 用于指定发送的数据，可以是 DOM 对象的实例、输入流或字符串。如果没有参数需要传递，可以设置为 null 。</p>
<p>例如，向服务器发送一个不包含任何参数的请求，可以使用下面的代码：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">http_request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="设置请求的-http-头的方法">设置请求的 HTTP 头的方法<a href="#设置请求的-http-头的方法" class="hash-link" aria-label="设置请求的 HTTP 头的方法的直接链接" title="设置请求的 HTTP 头的方法的直接链接" translate="no">​</a></h2>
<p>setRequestHeader 方法用于为请求的 HTTP 头设置值。 setRequestHeader 方法的具体语法格式如下：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">setRequestHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;header&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;value&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<ul>
<li class="">header ：用于指定 HTTP 头。</li>
<li class="">value ：用于为指定的 HTTP 头设置值。</li>
</ul>
<p>说明 <code>setRequestHeader</code> 方法必须在调用 <code>open</code> 方法之后才能调用。</p>
<p>例如，在发送 <code>POST</code> 请求时，需要设置 <code>Content-Type</code> 请求头的值为 <code>application/x-www-form-urlencoded</code> ，这时就可以通过 <code>setRequestHeader</code> 方法进行设置，具体代码如下：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">http_request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setRequestHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;Content-Type&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;application/x-www-form-urlencoded&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="停止或放弃当前异步请求的方法">停止或放弃当前异步请求的方法<a href="#停止或放弃当前异步请求的方法" class="hash-link" aria-label="停止或放弃当前异步请求的方法的直接链接" title="停止或放弃当前异步请求的方法的直接链接" translate="no">​</a></h2>
<p>abort 方法用于停止或放弃当前异步请求。其语法格式如下：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">abort</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>例如，要停止当前异步请求可以使用下面的语句：</p>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="http_requestabort">http_request.abort()<a href="#http_requestabort" class="hash-link" aria-label="http_request.abort()的直接链接" title="http_request.abort()的直接链接" translate="no">​</a></h2>
<p>返回 HTTP 头信息的方法。</p>
<p><code>XMLHttpRequest</code> 对象提供了两种返回 <code>HTTP</code> 头信息的方法，分别是 <code>getResponseHeader</code> 和 <code>getAllResponseHeaders</code> 方法。下面分别进行介绍。</p>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="getresponseheader-方法">getResponseHeader 方法<a href="#getresponseheader-方法" class="hash-link" aria-label="getResponseHeader 方法的直接链接" title="getResponseHeader 方法的直接链接" translate="no">​</a></h2>
<p>getResponseHeader 方法用于以字符串形式返回指定的 HTTP 头信息。其语法格式如下：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">getResponseHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;headerLabel&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>参数 <code>headerLabel</code> 用于指定 <code>HTTP</code> 头，包括 <code>Server</code> 、 <code>Content-Type</code> 和 <code>Date</code> 等。</p>
<p>例如，要获取 <code>HTTP</code> 头 <code>Content-Type</code> 的值，可以使用以下代码：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">http_request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getResponseHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Content-Type&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>上面的代码将获取到以下内容： <code>text/html;charset=GBK</code></p>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="getallresponseheaders-方法">getAllResponseHeaders 方法<a href="#getallresponseheaders-方法" class="hash-link" aria-label="getAllResponseHeaders 方法的直接链接" title="getAllResponseHeaders 方法的直接链接" translate="no">​</a></h2>
<p><code>getAllResponseHeaders</code> 方法用于以字符串形式返回完整的 <code>HTTP</code> 头信息，其中包括 <code>Server</code> 、 <code>Date</code> 、 <code>Content</code>-Type 和 <code>Content-Length</code> 。 <code>getAllResponseHeaders</code> 方法的语法格式如下：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">getAllResponseHeaders</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">http_request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getAllResponseHeaders</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><code>XMLHttpRequest</code> 对象和 <code>XMLHTTP</code> 组件很相似，有很多相似的方法和属性，所以后来人们干脆将 <code>XMLHttpRequest</code> 对象和 <code>XMLHTTP</code> 组件统称为 <code>XMLHttpRequest</code> ，或简称为 <code>XHR</code>。</p>
<p>XMLHttpRequest 对象的主要功用是使用 XML 格式数据发送异步调用请求，它模拟了标准的 HTTP 请求，但是却使用 XML 格式将请求数据发送给服务器。</p>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="一个标准的-ajax-应用所应具备的步骤">一个标准的 AJAX 应用所应具备的步骤<a href="#一个标准的-ajax-应用所应具备的步骤" class="hash-link" aria-label="一个标准的 AJAX 应用所应具备的步骤的直接链接" title="一个标准的 AJAX 应用所应具备的步骤的直接链接" translate="no">​</a></h2>
<div class="language-html codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-html codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">utf-8</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">JavaScript Sample</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 处理返回的结果 function getResult() { alert(oXMLHttpRequest.status); if</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (oXMLHttpRequest.status == 200) { try { console.log( &#x27; 数据 ==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">xmp</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> &#x27; + oXMLHttpRequest.responseText + &#x27; </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">xmp</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;, ); } catch (err) { alert(err.message); } } else if</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (oXMLHttpRequest.status == 404) { console.log(&#x27; 没有发现请求的文档！ &#x27;); }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else if (oXMLHttpRequest.status == 500) { console.log(&#x27; 服务器内部错误！ &#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } } // 响应状态变化 // function theReadyStateChange() { // 根据 HTTP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    请求的状态码确定当前请求处于什么状态 if (oXMLHttpRequest.readyState == 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 对象尚未初始化，这是最初的状态，这时 open 方法尚未被调用 //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    可以编写一段业务逻辑处理这个状态 } else if (oXMLHttpRequest.readyState == 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    { // 对象已创建，这时还未调用 send 方法 //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    可以给用户一段提示信息，例如正在加载、请稍等等 } else if</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (oXMLHttpRequest.readyState == 2) { // 已经调用 send</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    方法，但响应主体还未到达 } else if (oXMLHttpRequest.readyState == 3) { //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    与服务器交互过程中，部分数据已经到达，但还不可以访问 } else if</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (oXMLHttpRequest.readyState == 4) { //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    全部数据已经到达，数据和报头都可以访问了 getResult(); }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alert(oXMLHttpRequest.readyState); } // 首先创建一个 XMLHttpRequest 对象 var</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHttpRequest = new XMLHttpRequest(); //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    接着设置一个函数响应状态变化，这是一个回调函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHttpRequest.onreadystatechange = theReadyStateChange; //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    打开连接，发送数据，并在这个过程中捕捉错误 try { oXMLHttpRequest.open(&#x27;GET&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;http:\/\/localhost/employees.xml &#x27;, true); oXMLHttpRequest.send(); } catch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (err) { alert(err.message); }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<p>下面是 XMLHttpRequest 发送的 HTTP 请求和服务器的响应报头。</p>
<div class="language-html codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-html codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">GET /employees.xml HTTP/1.1 Accept: _/_ Referer:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">a</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">http://localhost/go.html</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">nofollow</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">http://localhost/go.html</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">a</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Accept-Encoding: gzip, deflate User-Agent: Mozilla/4.0 (compatible; MSIE 6.0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Windows NT 5.1; SV1) Host: localhost Connection: Keep-Alive HTTP/1.1 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Server: Microsoft-IIS/5.1 Date: Sat, 27 Oct 2007 10:16:41 GMT Content-Type:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">text/xml Accept-Ranges: bytes Last-Modified: Sun, 15 Apr 2007 16:56:29 GMT ETag:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;80582c37f7fc71:aad &quot;Content-Length: 537</span><br></span></code></pre></div></div>
<p>XMLHttpRequest 发送的是标准的 HTTP 请求，使用其方法和属性也可以对返回的 HTTP 响应做出合适的处理。</p>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="xmlhttprequest-的方法和属性">XMLHttpRequest 的方法和属性<a href="#xmlhttprequest-的方法和属性" class="hash-link" aria-label="XMLHttpRequest 的方法和属性的直接链接" title="XMLHttpRequest 的方法和属性的直接链接" translate="no">​</a></h2>
<p>XMLHttpRequest 的方法和属性用来向服务器发送请求和从服务器获取响应。</p>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="发送请求">发送请求<a href="#发送请求" class="hash-link" aria-label="发送请求的直接链接" title="发送请求的直接链接" translate="no">​</a></h2>
<p>XMLHttpRequest 对象的一些方法用来构建一个 HTTP 请求，并向服务器发送。</p>
<ul>
<li class="">open() 方法</li>
</ul>
<p>open() 方法的语法格式如下：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">method</span><span class="token punctuation" style="color:#393A34">,</span><span class="token constant" style="color:#36acaa">URL</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">asyncFlag</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">userName</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">password</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<ul>
<li class="">参数 method 用来定义 HTTP 请求所使用的方法，包括 POST 、 GET 、 PUT 及 PATCH 等，该参数无须区分大小写</li>
<li class="">参数 URL 为请求的 URL 地址，可以为绝对地址也可以为相对地址</li>
<li class="">参数 asyncFlag 用来定义创建的请求是否为异步方式，默认值为 true ，意味着使用异步方式发送请求，并不立即返回数据。如果值为 false ，则意味着立即返回数据。当该参数值设置为
true
时，那么状态改变时会调用 onreadystatechange 属性指定的回调函数</li>
<li class="">参数 userName 和 password 分别用来定义用户名和密码，用于通过服务器基本验证。如果未定义这两个参数或用户名和密码不正确，那么服务器需要基本验证时，会弹出请求验证的对话框</li>
</ul>
<p>后 3 个参数都是可选的。</p>
<ul>
<li class="">send()</li>
</ul>
<p>该方法的语法格式如下：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">content</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>该方法发送 <code>HTTP</code> 请求并接收服务器的响应。参数 <code>content</code> 是可选的，用来定义发送请求的正文。</p>
<p>此方法的同步或异步方式取决于 <code>open()</code> 方法中的 <code>asyncFlag</code> 参数。</p>
<p>注意，如果要定义发送的内容，那么最好使用字符串格式，并且使用 <code>setRequestHeader()</code> 方法定义请求报头的内容类型，必须包括 <code>charset</code> 以设置编码方式。</p>
<p>虽然微软的 <code>XMLHTTP</code> 比较强大，可以发送很多类型的数据，但是其它浏览器以及 <code>W3C</code> 都定义仅仅可以发送字符串或者 <code>DOM Document</code> ，鉴于 <code>Document</code> 也必须序列化为字符串，建议读者最好直接使用字符串（ <code>Document</code> 使用 <code>Document.xml</code> 自己序列化后作为参数）。</p>
<ul>
<li class="">setRequestHeader() 方法</li>
</ul>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setRequestHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">header</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>这将和请求一起发送到服务端。如果已经存在同名的 HTTP 请求报头则覆盖之，并且该方法应该在 open() 方法之后、 send() 方法之前调用。</p>
<p>参数 header 和 value 分别用来定义报头字段和值。例如下面的代码：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setRequestHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;myHeader &#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;myValue &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>这增加一个新的报头：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">myHeader</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> myValue</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<ul>
<li class="">abort() 方法</li>
</ul>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">abort</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="获取响应">获取响应<a href="#获取响应" class="hash-link" aria-label="获取响应的直接链接" title="获取响应的直接链接" translate="no">​</a></h2>
<p>XMLHttpRequest 对象的一些方法和属性用来获取从服务器返回的响应，包括 HTTP 报头和响应正文。</p>
<ul>
<li class="">getAllResponseHeaders() 方法</li>
</ul>
<p>该方法的语法格式如下：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">strHeaders </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getAllResponseHeaders</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>该方法返回一个字符串类型值，因此显得有些不好处理，如果想返回其中某个特定的字段值，建议使用 getResponseHeader() 方法。</p>
<p>就像前面介绍的那样，每个 HTTP 报头名称和值用冒号分隔，并以 \r\n 结束。</p>
<ul>
<li class="">getResponseHeader() 方法</li>
</ul>
<p>该方法的语法格式如下：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">strValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getResponseHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;header &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>参数 header 是一个 HTTP 响应的字段名。</p>
<ul>
<li class="">responseText 和 responseXML 属性</li>
</ul>
<p>responseText 和 responseXML 属性都是只读属性，用来返回服务器响应中的正文。</p>
<p>responseText 属性的值是服务器响应正文数据的纯文本版本，而 responseXML 属性则表示服务器响应正文数据被解析成 DOM 后的版本，是一个文档对象。可以使用 DOM
接口处理其中的数据。</p>
<p>如果响应数据不是有效的 XML 文档，而使用了 responseXML 属性，那么就会出现解析错误，但是该属性本身不返回 XMLDOMParseError ，可以通过处理 responseXML
属性的值获取错误信息。</p>
<ul>
<li class="">readyState 属性</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="设置状态改变事件">设置状态改变事件<a href="#设置状态改变事件" class="hash-link" aria-label="设置状态改变事件的直接链接" title="设置状态改变事件的直接链接" translate="no">​</a></h2>
<p>使用 onreadystatechange 属性可以指定一个函数，当状态改变时就调用该函数。调用的这个函数被称为回调函数。该函数经常和 readyState 、 status 及 statusText
属性来确定响应的具体状态。</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">theReadyStateChange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//根据 HTTP 请求的状态码确定当前请求处于什么状态</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">readyState</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 对象尚未初始化，这是最初的状态，此时尚未调用 open() 方法</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 可以编写一段业务逻辑处理这个状态</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">readyState</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 对象已创建，此时还未调用 send() 方法</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// // 这时可以给用户一段提示信息，例如正在加载、请稍等等</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">readyState</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 已经调用 send() 方法，但响应主体还未到达</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">readyState</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 与服务器交互过程中，部分数据已经到达，但还不可以访问</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">readyState</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 全部数据已经到达，数据和报头都可以访问了</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">getResult</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">readyState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>一个标准的同步调用所应具备的步骤</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 处理返回的结果</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getResult</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27; 数据 == &lt; xmp &gt; &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">responseText</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27; &lt; /xmp&gt; &#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">404</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27; 没有发现请求的文档！ &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27; 服务器内部错误！ &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> oXMLHttpRequest </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Msxml2.XMLHTTP &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 无需定义 oXMLHttpRequest.onreadystatechange</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;GET &#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;http: //localhost/employees.xml&amp;amp;#8221&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 顺序执行，直到返回结果才会执行下面一行程序</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">getResult</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="编码混乱问题的解决">编码混乱问题的解决<a href="#编码混乱问题的解决" class="hash-link" aria-label="编码混乱问题的解决的直接链接" title="编码混乱问题的解决的直接链接" translate="no">​</a></h2>
<p>在应用 XMLHttpRequest 时会发现接收到的响应会产生乱码，这是由于不当的 HTTP 内容类型报头造成的，有多种方法可以处理乱码问题。</p>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="通过-web-服务器设置">通过 Web 服务器设置<a href="#通过-web-服务器设置" class="hash-link" aria-label="通过 Web 服务器设置的直接链接" title="通过 Web 服务器设置的直接链接" translate="no">​</a></h2>
<ul>
<li class="">
<p>选择 &quot; 开始 &quot; → &quot; 控制面板 &quot; 命令，打开控制面板，双击 &quot; 管理工具 &quot; 程序组图标，打开 &quot; 管理工具 &quot; 窗口，双击 &quot;Internet 信息服务 &quot; 图标，就会弹出 &quot;Internet 信息服务&quot; 管理控制台</p>
</li>
<li class="">
<p>右击要作为数据源的文件，在快捷菜单中选择 &quot; 属性 &quot; 命令，就会弹出 &quot; 文件属性 &quot; 对话框，选择 &quot;HTTP 头 &quot; 选项卡。单击 &quot; 添加 &quot; 按钮就可以打开 &quot; 添加 / 编辑自定义 HTTP 头 &quot;对话框，分别在 &quot;自定义 HTTP 头名&quot; 和 &quot;自定义 HTTP 头值&quot; 文本框中输入 Content-type 和 text/xml;charset=utf-8 。然后单击 &quot; 确定 &quot; 按钮关闭对话框，可以看到新增的 HTTP 响应报头</p>
</li>
<li class="">
<p>单击 &quot; 确定 &quot; 按钮保存更改，重启 Web 服务器就可以使新设置生效</p>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="通过动态脚本语言解决">通过动态脚本语言解决<a href="#通过动态脚本语言解决" class="hash-link" aria-label="通过动态脚本语言解决的直接链接" title="通过动态脚本语言解决的直接链接" translate="no">​</a></h2>
<p>一些动态脚本语言，例如 ASP 、 ASP.NET 、 JSP 、 PHP 等都可以动态创建 HTTP 响应报头，下面分别是它们创建默认内容类型的代码。</p>
<p>ASP 代码。</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">%</span><span class="token maybe-class-name">Response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">AddHeader</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Content-type &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;text/xml;charset=utf-8 &quot;</span><span class="token operator" style="color:#393A34">%</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<p>JSP 代码。</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">%</span><span class="token plain">response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Content-type &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;text/xml;charset=utf-8 &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token operator" style="color:#393A34">%</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<p>PHP 代码。</p>
<div class="language-php codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-php codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php header( &quot;Content-type: text/xml;charset=utf-8 &quot;);?&gt;</span><br></span></code></pre></div></div>
<p>ASP.NET 代码（ C# 和 VB 适用）。</p>
<div class="language-c# codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-c# codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;%response.AppendHeader( &quot;Content-type &quot;,&quot;text/xml;charset=utf-8 &quot;)%&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="跨浏览器兼容">跨浏览器兼容<a href="#跨浏览器兼容" class="hash-link" aria-label="跨浏览器兼容的直接链接" title="跨浏览器兼容的直接链接" translate="no">​</a></h2>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="跨浏览器实现-xmlhttprequest">跨浏览器实现 XMLHttpRequest<a href="#跨浏览器实现-xmlhttprequest" class="hash-link" aria-label="跨浏览器实现 XMLHttpRequest的直接链接" title="跨浏览器实现 XMLHttpRequest的直接链接" translate="no">​</a></h2>
<p>较旧版本的 IE 允许用户使用 MSXML 的 XMLHTTP 类发送和接收 XML 数据，该类通过调用下面的构造器方法进行实例化（还可以指定版本）。</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Msxml2.XMLHTTP &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Msxml2.XMLHTTP.3.0 &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Msxml2.XMLHTTP.4.0 &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Msxml2.XMLHTTP.5.0 &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>或者使用下面的方法。</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Microsoft.XMLHTTP &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>而 Mozilla 以及其它的浏览器在全局的 XMLHttpRequest 类中提供了相同的功能。因此，可以使用下面的代码返回一个 XMLHttpRequest 实例。</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">XMLHttpRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Mozilla 、 Safari 、 IE7 、 Opera 等适用</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  oXMLHttpRequest </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">XMLHttpRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">overrideMimeType</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">overrideMimeType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;text / xml &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//IE7 以前的浏览器适用，并且有两种不同的版本</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> progIDs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;Msxml2.XMLHTTP .5 .0&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;Msxml2.XMLHTTP .4 .0&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;MSXML2.XMLHTTP .3 .0&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;MSXML2.XMLHTTP&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;Microsoft.XMLHTTP&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> progIDs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      oXMLHttpRequest </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">progIDs</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        oXMLHttpRequest </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Microsoft.XMLHTTP&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27; 不存在适用的 XMLHttpRequest&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="跨浏览器实现-xml-解析">跨浏览器实现 XML 解析<a href="#跨浏览器实现-xml-解析" class="hash-link" aria-label="跨浏览器实现 XML 解析的直接链接" title="跨浏览器实现 XML 解析的直接链接" translate="no">​</a></h2>
<p>数据被加载后，可以使用下面的方法解析数据为一个 W3C DOM 。</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 该函数用来跨浏览器解析 XML 数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">parse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">xml</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> doc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 较旧的 IE 支持的方法</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    doc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ActiveXObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Microsoft.XMLDOM&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">async</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">loadXML</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">xml</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 其它浏览器支持的方法</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> parser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">DOMParser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      doc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> parser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">parseFromString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">xml</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;text / xml&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">delete</span><span class="token plain"> parser</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">debug</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;XML parsing is not supported.&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> doc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="ajax-的特点">AJAX 的特点<a href="#ajax-的特点" class="hash-link" aria-label="AJAX 的特点的直接链接" title="AJAX 的特点的直接链接" translate="no">​</a></h2>
<p>AJAX 解决方案不能单独应用，这是首先要清楚的一点，只有将 JavaScript 嵌入到网页中， AJAX 和 DHTML 解决方案相互配合才可使它具有一些引人注目的特点。</p>
<p>JavaScript 负责交互和处理数据，而 XMLHttpRequest 对象负责构建合法的 HTTP 请求和获取 HTTP 响应。由于 AJAX 和 DHTML 的配合，它们有很多独特的特点。</p>
<ul>
<li class="">减轻了 Web 服务器的负担。因为局部视点数据的更新仅仅是获取部分数据，并且不包含数据结构，所以，它最大可能地减少了数据冗余，从而减轻了 Web 服务器的负担</li>
<li class="">由于 JavaScript 在客户端可以完成部分业务逻辑运算，所以也减轻了应用程序服务器的负担</li>
<li class="">可以改变页面局部视点，而无需更新整个页面，在减轻服务器负担的同时，也减少了数据通信量，从而缩短用户等待的时间</li>
<li class="">由于 DHTML 的配合，使得可以在单个网页中构建交互性的 GUI 界面实现与用户的交互，所以，网页有更好的用户体验</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_e79m" id="解决请求被浏览器缓存问题">解决请求被浏览器缓存问题<a href="#解决请求被浏览器缓存问题" class="hash-link" aria-label="解决请求被浏览器缓存问题的直接链接" title="解决请求被浏览器缓存问题的直接链接" translate="no">​</a></h2>
<p>在使用 XMLHttpRequest 时，要注意的一个问题是要加载的内容可能被浏览器缓存，这时，可以对 URL 参数稍作变化以避免此问题，一个常用的方法是加上一个随机数作为查询参数，例如下面的代码：</p>
<div class="language-js codeBlockContainer_zKmq theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_yZYC"><pre tabindex="0" class="prism-code language-js codeBlock_k5IM thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines__4YI"><span class="token-line" style="color:#393A34"><span class="token plain">oXMLHttpRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;GET &#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;http://localhost/employees.xml?time=&amp;amp;#8221&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>这样，每次请求的地址都不相同，也就不会被浏览器缓存了。</p>
<p>由于 JavaScript 目前是浏览器广泛支持的客户端技术，不需要插件，所以有利于标准化和跨浏览器实现。</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/js/XHR 2/file"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">file</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/js/XHR 2/案例"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">案例</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_Y07B thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#初始化-xmlhttprequest-对象" class="table-of-contents__link toc-highlight">初始化 XMLHttpRequest 对象</a></li><li><a href="#ie-浏览器" class="table-of-contents__link toc-highlight">IE 浏览器</a></li><li><a href="#2-非-ie-浏览器" class="table-of-contents__link toc-highlight">2. 非 IE 浏览器</a></li><li><a href="#xmlhttprequest-对象的常用属性" class="table-of-contents__link toc-highlight">XMLHttpRequest 对象的常用属性</a></li><li><a href="#指定状态改变时所触发的事件处理器的属性" class="table-of-contents__link toc-highlight">指定状态改变时所触发的事件处理器的属性</a></li><li><a href="#获取请求状态的属性" class="table-of-contents__link toc-highlight">获取请求状态的属性</a></li><li><a href="#获取服务器的字符串响应的属性" class="table-of-contents__link toc-highlight">获取服务器的字符串响应的属性</a></li><li><a href="#获取服务器的-xml-响应的属性" class="table-of-contents__link toc-highlight">获取服务器的 XML 响应的属性</a></li><li><a href="#返回服务器的-http-状态码的属性" class="table-of-contents__link toc-highlight">返回服务器的 HTTP 状态码的属性</a></li><li><a href="#xmlhttprequest-对象的常用方法" class="table-of-contents__link toc-highlight">XMLHttpRequest 对象的常用方法</a></li><li><a href="#创建新请求的方法" class="table-of-contents__link toc-highlight">创建新请求的方法</a></li><li><a href="#向服务器发送请求的方法" class="table-of-contents__link toc-highlight">向服务器发送请求的方法</a></li><li><a href="#设置请求的-http-头的方法" class="table-of-contents__link toc-highlight">设置请求的 HTTP 头的方法</a></li><li><a href="#停止或放弃当前异步请求的方法" class="table-of-contents__link toc-highlight">停止或放弃当前异步请求的方法</a></li><li><a href="#http_requestabort" class="table-of-contents__link toc-highlight">http_request.abort()</a></li><li><a href="#getresponseheader-方法" class="table-of-contents__link toc-highlight">getResponseHeader 方法</a></li><li><a href="#getallresponseheaders-方法" class="table-of-contents__link toc-highlight">getAllResponseHeaders 方法</a></li><li><a href="#一个标准的-ajax-应用所应具备的步骤" class="table-of-contents__link toc-highlight">一个标准的 AJAX 应用所应具备的步骤</a></li><li><a href="#xmlhttprequest-的方法和属性" class="table-of-contents__link toc-highlight">XMLHttpRequest 的方法和属性</a></li><li><a href="#发送请求" class="table-of-contents__link toc-highlight">发送请求</a></li><li><a href="#获取响应" class="table-of-contents__link toc-highlight">获取响应</a></li><li><a href="#设置状态改变事件" class="table-of-contents__link toc-highlight">设置状态改变事件</a></li><li><a href="#编码混乱问题的解决" class="table-of-contents__link toc-highlight">编码混乱问题的解决</a></li><li><a href="#通过-web-服务器设置" class="table-of-contents__link toc-highlight">通过 Web 服务器设置</a></li><li><a href="#通过动态脚本语言解决" class="table-of-contents__link toc-highlight">通过动态脚本语言解决</a></li><li><a href="#跨浏览器兼容" class="table-of-contents__link toc-highlight">跨浏览器兼容</a></li><li><a href="#跨浏览器实现-xmlhttprequest" class="table-of-contents__link toc-highlight">跨浏览器实现 XMLHttpRequest</a></li><li><a href="#跨浏览器实现-xml-解析" class="table-of-contents__link toc-highlight">跨浏览器实现 XML 解析</a></li><li><a href="#ajax-的特点" class="table-of-contents__link toc-highlight">AJAX 的特点</a></li><li><a href="#解决请求被浏览器缓存问题" class="table-of-contents__link toc-highlight">解决请求被浏览器缓存问题</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>